(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/sales_director/customer-details"],{"450e":function(e,t,o){"use strict";o.r(t);var n=o("4953"),i=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);t["default"]=i.a},4953:function(e,t,o){"use strict";(function(e,n){var i;function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,s=function(){return o.e("components/listShow").then(o.bind(null,"b9cb"))},r=function(){return o.e("components/uni-icons/uni-icons").then(o.bind(null,"2cee"))},u=o("b65b"),l=(i={components:{listShow:s,uniIcon:r},data:function(){return{identity:2,linkMan:"",operation:"",rival:"",customerInfo:"",isProduct:!1,admin:!1,isDisplay:!1,activeIndex:-1,items:["公司信息","联系人","经营状况","竞争对手"],itemsSell:["公司信息","联系人","经营状况"],isDoRefresh:!1,placeholdeView:!1}},onPullDownRefresh:function(){this.getCustomerInfo()},onShow:function(){var e=getCurrentPages(),t=e[e.length-1];1==t.data.isDoRefresh&&(t.data.isDoRefresh=!1,this.getCustomerInfo(),this.getLinkMan(),this.getOperation(),this.getRival())},onLoad:function(t){this,console.log(e(t," at pages/qing-f-c/sales_director/customer-details.vue:329")),c=t.companyCode,this.getCustomerInfo(),this.getLinkMan(),this.getOperation(),this.getRival()},onPageScroll:function(e){e.scrollTop>180?this.isDisplay=!0:(this.isDisplay=!1,this.placeholdeView=!1)}},a(i,"components",{}),a(i,"props",{}),a(i,"methods",{tabSwitch:function(e){switch(this.activeIndex=e,this.placeholdeView=!0,e){case 0:this.selectorQuery("#outView","#companyInfo");break;case 1:this.selectorQuery("#outView","#contact");break;case 2:this.selectorQuery("#outView","#condition");break;case 3:this.selectorQuery("#outView","#competitor");break}},selectorQuery:function(t,o){n.createSelectorQuery().select(t).boundingClientRect(function(t){n.createSelectorQuery().select(o).boundingClientRect(function(o){n.createSelectorQuery().select("#inTabbar").boundingClientRect(function(i){console.log(e(o.top,t.top,i.height," at pages/qing-f-c/sales_director/customer-details.vue:373")),n.pageScrollTo({duration:0,scrollTop:o.top-t.top-i.height})}).exec()}).exec()}).exec()},backto:function(){n.navigateBack({delta:1})},getCustomerInfo:function(){var t=this;console.log(e(c," at pages/qing-f-c/sales_director/customer-details.vue:391"));var o={companyCode:c};u.cmDetail(o).then(function(o){console.log(e(o," at pages/qing-f-c/sales_director/customer-details.vue:395")),t.customerInfo=o.data.data,console.log(e(t.customerInfo," at pages/qing-f-c/sales_director/customer-details.vue:398"))}).catch(function(t){console.log(e("Err===",t," at pages/qing-f-c/sales_director/customer-details.vue:401"))})},getLinkMan:function(){var t=this,o={companyCode:c};u.linkMan(o).then(function(o){console.log(e(o," at pages/qing-f-c/sales_director/customer-details.vue:409")),t.linkMan=o.data.data.list}).catch(function(t){console.log(e("Err===",t," at pages/qing-f-c/sales_director/customer-details.vue:412"))})},getOperation:function(){var t=this,o={companyCode:c};u.operation(o).then(function(o){console.log(e(o," at pages/qing-f-c/sales_director/customer-details.vue:419")),t.operation=o.data.data}).catch(function(t){console.log(e("Err===",t," at pages/qing-f-c/sales_director/customer-details.vue:422"))})},getRival:function(){var t=this,o={companyCode:c};u.rival(o).then(function(o){console.log(e("rival===",o," at pages/qing-f-c/sales_director/customer-details.vue:429")),t.rival=o.data.data.list}).catch(function(t){console.log(e("Err===",t," at pages/qing-f-c/sales_director/customer-details.vue:433"))})},toRecordDetails:function(){var e=this.customerInfo.id;wx.navigateTo({url:"/pages/jin-suo-yun/customer-admin/record-details?userId="+e+"&name="+this.customerInfo.corporateName})},goMarginControl:function(){var e=this.customerInfo.id;wx.navigateTo({url:"/pages/jin-suo-yun/customer-admin/margin-control?userId="+e})},toBondDetail:function(){var e=this.customerInfo.id;2==this.customerInfo.type?wx.showToast({title:"开发中...",icon:"none"}):wx.navigateTo({url:"/pages/jin-suo-yun/customer-admin/bond-list?id="+e})},addCompetitor:function(t){var o=this.customerInfo.companyCode;n.navigateTo({url:"/pages/qing-f-c/sellDupty/add-competitor?companyCode="+o,success:function(t){console.log(e(t," at pages/qing-f-c/sales_director/customer-details.vue:483"))},fail:function(t){console.log(e(t," at pages/qing-f-c/sales_director/customer-details.vue:486"))},complete:function(){}})},detailCompetitor:function(t){var o=t;n.navigateTo({url:"/pages/qing-f-c/sellDupty/detail-competitor?rivalCode="+o,success:function(t){console.log(e(t," at pages/qing-f-c/sales_director/customer-details.vue:497"))},fail:function(t){console.log(e(t," at pages/qing-f-c/sales_director/customer-details.vue:500"))},complete:function(){}})},goEditCustomer:function(){var e=this.customerInfo.companyCode;n.navigateTo({url:"/pages/qing-f-c/sellDupty/edit-customer?companyCode="+e,success:function(e){},fail:function(){},complete:function(){}})},addContacts:function(t){var o=this.customerInfo.companyCode;console.log(e(t," at pages/qing-f-c/sales_director/customer-details.vue:519")),n.navigateTo({url:"/pages/qing-f-c/sellDupty/add-contact?companyCode="+o,success:function(e){},fail:function(){},complete:function(){}})},toEditLinkman:function(e){var t=e;n.navigateTo({url:"/pages/qing-f-c/sellDupty/contact-detail?buyOrSellCode="+t,success:function(e){},fail:function(){},complete:function(){}})},toSetManagementCondition:function(e,t){var o=this.customerInfo.companyCode;if(2==e)wx.navigateTo({url:"/pages/qing-f-c/sellDupty/setManagerCondition?companyCode="+o});else if(1==e){var n=JSON.stringify(this.operation);wx.navigateTo({url:"/pages/qing-f-c/sellDupty/editManagerCondition?data="+n})}},toInquiry:function(){wx.navigateTo({url:"/pages/jin-suo-yun/customer-admin/sampling-record?id="+_id})},toProductPage:function(){var e,t=this.customerInfo.productInfo;e=t?"/pages/jin-suo-yun/customer-admin/product-display?customerId="+_id:"/pages/jin-suo-yun/customer-admin/add-productpage?type="+this.customerInfo.type+"&customerid="+_id,wx.navigateTo({url:e})},bindNull:function(){wx.showToast({title:"待开发...",icon:"none"})},tapDelete:function(){if(this.admin){var t=["删除客户"],o=this.customerInfo.id;wx.showActionSheet({itemList:t,success:function(t){wx.showModal({title:"删除客户",content:"删除客户后该客户的信息将作废，确定删除该客户？",success:function(t){t.confirm?u.deleteCompany(o).then(function(e){var t=getCurrentPages(),o=t[t.length-2];o.setData({setOver:!0}),wx.showToast({title:"删除客户成功"});setTimeout(function(){wx.navigateBack({})},1e3)}).catch(function(t){console.log(e("删除失败err=>",t," at pages/qing-f-c/sales_director/customer-details.vue:613")),wx.showToast({title:"删除客户失败",icon:"none"})}):t.cancel&&console.log(e("用户点击取消"," at pages/qing-f-c/sales_director/customer-details.vue:620"))}}),console.log(e("111Res---",t," at pages/qing-f-c/sales_director/customer-details.vue:625"))}})}},setData:function(e){var t,o,n=this,i=[];Object.keys(e).forEach(function(a){i=a.split("."),t=e[a],o=n.$data,i.forEach(function(e,a){a+1==i.length?n.$set(o,e,t):o[e]||n.$set(o,e,{}),o=o[e]})})}}),i);t.default=l}).call(this,o("0de9")["default"],o("6e42")["default"])},"68c2":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},i=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return i})},cdf7:function(e,t,o){"use strict";(function(e){o("3b9b"),o("921b");n(o("66fd"));var t=n(o("f4d2"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},e248:function(e,t,o){},eb53:function(e,t,o){"use strict";var n=o("e248"),i=o.n(n);i.a},f4d2:function(e,t,o){"use strict";o.r(t);var n=o("68c2"),i=o("450e");for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);o("eb53");var c=o("2877"),s=Object(c["a"])(i["default"],n["a"],n["b"],!1,null,null,null);t["default"]=s.exports}},[["cdf7","common/runtime","common/vendor"]]]);