(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/sales_director/customer-admin"],{2351:function(t,e,i){"use strict";(function(t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,n,a=20,l=i("b65b"),c={data:function(){return{tabTwo:0,compileing:!1,allPitchOn:!1,inputValueOne:"",setOver:!1,selectContent:[],bindSelect:!1,loading:!1,numOne:0,numTwo:0,numThree:0,customerList:[],isFilterBuyer:!1,isFilterSeller:!1,pageNum:1,buyOrSell:-1,isAllocation:-1,isLastPage:!1,codeValue:[],isDoRefresh:!1}},onReachBottom:function(){this.isLastPage||(this.pageNum=this.pageNum+1,this.getCustomerList(this.pageNum,this.isAllocation))},onPullDownRefresh:function(){this.pageNum=1,this.getCustomerList(this.pageNum,this.isAllocation)},onShow:function(){var t=getCurrentPages(),e=t[t.length-1];1==e.data.isDoRefresh&&(e.data.isDoRefresh=!1,this.pageNum=1,this.getCustomerList(this.pageNum,this.isAllocation),this.dmCount())},onLoad:function(e){o=this,n=t.getStorageSync("pupDefault"),this.checkLogin()&&(this.getCustomerList(this.pageNum,this.isAllocation),this.getRegionCode(),this.dmCount())},onNavigationBarButtonTap:function(t){this.tabTwo>0&&this.tapCompile()},components:{},props:{},methods:{getRegionCode:function(){var t=this.Api.getRegion;this.myRequest({},t,"get").then(function(t){console.log(s("regionCode",t," at pages/qing-f-c/sales_director/customer-admin.vue:264")),o.selectContent=t.data.data.list,o.selectContent.unshift({id:0,label:"区域"}),console.log(s("regionCode===",o.selectContent," at pages/qing-f-c/sales_director/customer-admin.vue:267"))}).catch(function(t){console.log(s("getBSList=err==",res," at pages/qing-f-c/sales_director/customer-admin.vue:270"))})},getCustomerList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r={keyword:u,regionCode:c,buyOrSell:i,isAllocation:e,pageNum:t,pageSize:a,postCode:n};console.log(s(r," at pages/qing-f-c/sales_director/customer-admin.vue:285")),l.dmList(r).then(function(t){console.log(s("客户信息===",t," at pages/qing-f-c/sales_director/customer-admin.vue:288")),o.customerList=t.data.data.list,console.log(s("customerlist===",o.customerList," at pages/qing-f-c/sales_director/customer-admin.vue:290")),o.isLastPage=t.data.data.isLastPage,console.log(s("最后一页",o.isLastPage," at pages/qing-f-c/sales_director/customer-admin.vue:292"))}).catch(function(t){console.log(s("getBSList=err==",res," at pages/qing-f-c/sales_director/customer-admin.vue:294"))})},dmCount:function(){var t={keyword:"",regionCode:"",buyOrSell:-1};l.dmCount(t).then(function(t){console.log(s("客户数量===",t," at pages/qing-f-c/sales_director/customer-admin.vue:305")),o.numOne=t.data.data.all,o.numTwo=t.data.data.isAllocation,o.numThree=t.data.data.notAllocation}).catch(function(t){console.log(s("getBSList=err==",res," at pages/qing-f-c/sales_director/customer-admin.vue:310"))})},checkboxChange:function(t){this.codeValue=t.detail.value},tabAllPitchOn:function(){this.allPitchOn=!this.allPitchOn,console.log(s("quanxuankuang",this.allPitchOn," at pages/qing-f-c/sales_director/customer-admin.vue:321"));var t=[];this.allPitchOn?(this.customerList.forEach(function(e){t.push(e.companyCode)}),o.codeValue=t):o.codeValue=[]},blurInput:function(t){console.log(s(this.tabOne,t.detail.value," at pages/qing-f-c/sales_director/customer-admin.vue:339"))},tapBuyFilter:function(t){var e;this.buyOrSell=1,this.isFilterBuyer=!0,this.isFilterSeller=!1,e=0==this.selectContent[0].id?"":this.selectContent[0].id,this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell,e)},tapSellFilter:function(){var t;this.buyOrSell=2,this.isFilterBuyer=!1,this.isFilterSeller=!0,t=0==this.selectContent[0].id?"":this.selectContent[0].id,this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell,t)},bindSearch:function(t){},bindSelectFunc:function(){this.bindSelect=!this.bindSelect},bindSelectContent:function(t){var e=t.currentTarget.dataset.index,i=this.selectContent,s=i[0];i[0]=i[e],i[e]=s,0==this.selectContent[0].id?this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell):this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell,this.selectContent[0].id)},tapSearch:function(){t.showLoading({title:"搜索中..."}),this.getCustomerList("","","","",this.inputValueOne),setTimeout(function(){t.hideLoading()},1e3)},setNavButton:function(t){var e=getCurrentPages(),i=e[e.length-1],s=i.$getAppWebview(),o=s.getStyle().titleNView;o.buttons[0].text=t,s.setStyle({titleNView:o})},tapTabTwo:function(t){var e=t.currentTarget.dataset.index;this.isAllocation=1,this.tabTwo=e,console.log(s(e," at pages/qing-f-c/sales_director/customer-admin.vue:440")),0==e&&(this.setNavButton(""),this.isAllocation=-1,this.compileing=!1,this.getCustomerList()),1==e&&(this.setNavButton("编辑"),this.isAllocation=1,this.pageNum=1,this.getCustomerList(this.pageNum,this.isAllocation)),2==e&&(this.setNavButton("编辑"),this.isAllocation=0,this.pageNum=1,console.log(s("分配状态：",this.isAllocation," at pages/qing-f-c/sales_director/customer-admin.vue:460")),this.getCustomerList(this.pageNum,this.isAllocation))},tapCompile:function(){this.compileing=!this.compileing},setTime:function(){var t=new Date,e=t.getMonth()+1;e=e<10?"0"+e:e;var i=t.getFullYear()+"-"+e+"-"+t.getDate();this.newTime=i},toAllotAreaManager:function(){var e=this,i=o.codeValue,n=[];if(o.codeValue.forEach(function(t){e.customerList.forEach(function(e){e.companyCode==t&&n.push(e.buyOrSell)})}),n.includes(1)&&n.includes(2))t.showToast({title:"不能同时选择买家和卖家",icon:"none"});else{console.log(s("optionList===",i.length," at pages/qing-f-c/sales_director/customer-admin.vue:510")),i.length>0?(i=JSON.stringify(i),t.navigateTo({url:"/pages/qing-f-c/sales_director/manager-list?optionList="+i+"&buyOrSell="+n[0]})):t.showToast({title:"至少选择一个客户",icon:"none"})}},deleteAllot:function(){var t=this,e=o.codeValue,i={companyCodes:e},n=this.Api.majordomoDel;this.myRequest(i,n,"post").then(function(e){0==e.data.status&&(wx.showToast({title:"成功删除分配"}),0==t.selectContent[0].id?t.getCustomerList(t.pageNum,t.isAllocation,t.buyOrSell):t.getCustomerList(t.pageNum,t.isAllocation,t.buyOrSell,t.selectContent[0].id))}).catch(function(t){console.log(s("getBSList=err==",res," at pages/qing-f-c/sales_director/customer-admin.vue:547"))})},toClientDetail:function(t){console.log(s(t," at pages/qing-f-c/sales_director/customer-admin.vue:556")),wx.navigateTo({url:"/pages/qing-f-c/sellDupty/customer-details?companyCode="+t})}}};e.default=c}).call(this,i("6e42")["default"],i("0de9")["default"])},"2fe3":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return o})},6058:function(t,e,i){"use strict";i.r(e);var s=i("2351"),o=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=o.a},"6d76":function(t,e,i){"use strict";(function(t){i("3b9b"),i("921b");s(i("66fd"));var e=s(i("959b"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},"6f8c":function(t,e,i){"use strict";var s=i("806f"),o=i.n(s);o.a},"806f":function(t,e,i){},"959b":function(t,e,i){"use strict";i.r(e);var s=i("2fe3"),o=i("6058");for(var n in o)"default"!==n&&function(t){i.d(e,t,function(){return o[t]})}(n);i("6f8c");var a=i("2877"),l=Object(a["a"])(o["default"],s["a"],s["b"],!1,null,null,null);e["default"]=l.exports}},[["6d76","common/runtime","common/vendor"]]]);