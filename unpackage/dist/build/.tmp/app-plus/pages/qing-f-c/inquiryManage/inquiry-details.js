(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/inquiryManage/inquiry-details"],{"0523":function(t,n,i){"use strict";(function(t){i("3b9b"),i("921b");e(i("66fd"));var n=e(i("ade0"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,i("6e42")["createPage"])},3294:function(t,n,i){"use strict";var e,a=function(){var t=this,n=t.$createElement,i=(t._self._c,t._f("returnCombine")(t.orderSummary.list));t.$mp.data=Object.assign({},{$root:{f0:i}})},u=[];i.d(n,"b",(function(){return a})),i.d(n,"c",(function(){return u})),i.d(n,"a",(function(){return e}))},"46a7":function(t,n,i){},"47bd":function(t,n,i){"use strict";var e=i("46a7"),a=i.n(e);a.a},"4dad":function(t,n,i){"use strict";(function(t,e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=u(i("4795"));function u(t){return t&&t.__esModule?t:{default:t}}function o(t,n,i,e,a,u,o){try{var r=t[u](o),s=r.value}catch(c){return void i(c)}r.done?n(s):Promise.resolve(s).then(e,a)}function r(t){return function(){var n=this,i=arguments;return new Promise((function(e,a){var u=t.apply(n,i);function r(t){o(u,e,a,r,s,"next",t)}function s(t){o(u,e,a,r,s,"throw",t)}r(void 0)}))}}var s,c,l=function(){i.e("components/popupMe").then(function(){return resolve(i("cb0f"))}.bind(null,i)).catch(i.oe)},g=function(){i.e("components/popupMeUnmatch").then(function(){return resolve(i("46a6"))}.bind(null,i)).catch(i.oe)},f=function(){i.e("components/uni-icons/uni-icons").then(function(){return resolve(i("2cee"))}.bind(null,i)).catch(i.oe)},d=function(){i.e("components/inquiry/baojia-list-buy").then(function(){return resolve(i("3d9b"))}.bind(null,i)).catch(i.oe)},y=function(){i.e("components/inquiry/baojia-list-direct").then(function(){return resolve(i("cedf"))}.bind(null,i)).catch(i.oe)},q=function(){i.e("components/sample-inquiry/chanpinyaosu-quote").then(function(){return resolve(i("dd41"))}.bind(null,i)).catch(i.oe)},h=function(){i.e("components/popupMe-copy").then(function(){return resolve(i("43c0"))}.bind(null,i)).catch(i.oe)},p={filters:{returnCombine:function(t){return t.join("，")}},components:{popupMe:l,uniIcon:f,baojiaList:d,baojiaListDirect:y,chanpinyaosu:q,popupCopy:h,popupMeUnmatch:g},data:function(){return{items:[{id:"1",label:"品质问题"},{id:"2",label:"价格因素"},{id:"3",label:"货期原因"},{id:"4",label:"其他"}],closeItems:[{id:"1",label:"价格高"},{id:"2",label:"货期不符"},{id:"3",label:"品质不匹配"},{id:"4",label:"客户以丢单"},{id:"5",label:"录入错误"},{id:"6",label:"其他"}],isMatch:!0,unMatch:"",closing:"",inquiryInfo:"",inquiry:"",quotationList:[],directQuotion:[],isDoRefresh:!1,quotationNumber:"",pageNum:1,pageSize:10,orderSummary:""}},onShow:function(){var t=getCurrentPages(),n=t[t.length-1];1==n.data.isDoRefresh&&(n.data.isDoRefresh=!1,s.getInquiryInfo(c),s.getDeputyQuotation(),s.getDirectQuotation()),s.getInquiryInfo(c),s.getDeputyQuotation(),s.getDirectQuotation(),this.getOrderSummary()},onLoad:function(t){s=this,c=t.inquiryNumber,this.getInquiryInfo(c),this.getDeputyQuotation(),s.getDirectQuotation(),this.getOrderSummary()},methods:{getOrderSummary:function(){var n=this;return r(a.default.mark((function i(){var e,u;return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e={inquiryNumber:c},i.next=3,n.$http.get("/bInquiry/summary_details",{data:e});case 3:u=i.sent,n.orderSummary=u.data.data,t("log",n.orderSummary," at pages/qing-f-c/inquiryManage/inquiry-details.vue:243");case 6:case"end":return i.stop()}}),i)})))()},toOrderSummary:function(){e.navigateTo({url:"/pages/qing-f-c/inquiryManage/orderSummary/orderSummary?inquiryNumber=".concat(c)})},getDirectQuotation:function(){var n={inquiryNumber:c},i=this.Api.directPriceList;this.myRequest(n,i,"get").then((function(n){t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:259"),0==n.data.status&&(s.directQuotion=n.data.data.list,t("log","直接报价",s.directQuotion," at pages/qing-f-c/inquiryManage/inquiry-details.vue:262"))})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},getInquiryInfo:function(n){var i={inquiryNumber:n},e=this.Api.zyDetails;this.myRequest(i,e,"get").then((function(n){t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:279"),s.inquiryInfo=n.data.data.goInitialSample,s.inquiry=n.data.data.inquiry,t("log",s.inquiryInfo," at pages/qing-f-c/inquiryManage/inquiry-details.vue:282")})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},getDeputyQuotation:function(){var n={inquiryNumber:c,pageNum:s.pageNum,pageSize:s.pageSize},i=this.Api.buyerQuotation;this.myRequest(n,i,"get").then((function(n){t("log","报价单列表",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:299"),s.quotationList=n.data.data.list,t("log",s.quotationList," at pages/qing-f-c/inquiryManage/inquiry-details.vue:301")})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},tapClosing:function(){4!=s.inquiryInfo.inquiryStatusCode&&9!=s.inquiryInfo.inquiryStatusCode&&this.$refs.closingRef.show()},tapUnmatch:function(){this.$refs.unMatchRef.show()},getContent:function(n,i){switch(t("log",i," at pages/qing-f-c/inquiryManage/inquiry-details.vue:320"),n){case"unMatchRef":this.unMatch=i,this.unMatchFunc(),t("log",this.unMatch," at pages/qing-f-c/inquiryManage/inquiry-details.vue:325");break;case"closingRef":this.closing=i,this.closingInquiry(),t("log",this.closing," at pages/qing-f-c/inquiryManage/inquiry-details.vue:330");break;case"toCopyInquiry":var a=JSON.stringify(s.inquiryInfo);e.navigateTo({url:"/pages/qing-f-c/inquiryManage/inquiry-created-copy?data="+a+"&inquiryType=1",success:function(t){},fail:function(){},complete:function(){}});break}},closingInquiry:function(n){var i=s.closeItems[s.closing].label,e={inquiryNumber:c,buyDeputyRemarks:i},a=this.Api.buyDeputyClose;this.myRequest(e,a,"get").then((function(n){t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:353"),0==n.data.status&&(s.getInquiryInfo(c),s.getDeputyQuotation())})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},toCopyInquiry:function(){this.$refs.copyInquiry.show()},toDetail:function(n){t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:374"),e.navigateTo({url:"/pages/qing-f-c/inquiryManage/quotedPrice/quotedPrice?quoteNumber="+n})},backto:function(){e.navigateBack({delta:1})},swtichMatch:function(t){this.isMatch=!this.isMatch},pushSellerQuote:function(){var n={inquiryNumber:s.inquiry.inquiryNumber},i=this.Api.push;e.showLoading({title:"提交中",mask:!0}),this.myRequest(n,i,"get").then((function(n){e.hideLoading(),t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:402"),0==n.data.status?(e.showToast({title:"已推送",duration:1e3}),s.getInquiryInfo(c),s.getDeputyQuotation()):e.showToast({title:n.data.message,icon:"none"})})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},closingQuote:function(n){var i={quotationNumber:s.quotationNumber,sellDeputyRemarks:s.closing},a=this.Api.buyDeputySuited;e.showLoading({title:"提交中",mask:!0}),this.myRequest(i,a,"get").then((function(n){e.hideLoading(),t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:437"),0==n.data.status&&(s.getInquiryInfo(c),s.getDeputyQuotation())})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},unMatchFunc:function(n){var i=s.items[s.unMatch].label,a={quotationNumber:s.quotationNumber,buyDeputyRemarks:i},u=this.Api.buyDeputyUnsuited;e.showLoading({title:"提交中",mask:!0}),this.myRequest(a,u,"get").then((function(n){e.hideLoading(),t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:463"),0==n.data.status&&(s.getInquiryInfo(c),s.getDeputyQuotation())})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},handleEvent:function(n){switch(t("log",n[0]," at pages/qing-f-c/inquiryManage/inquiry-details.vue:477"),t("log",n[1]," at pages/qing-f-c/inquiryManage/inquiry-details.vue:478"),s.quotationNumber=n[1],n[0]){case"sure":var i={quotationNumber:s.quotationNumber},a=this.Api.buyDeputySuited;e.showLoading({title:"提交中",mask:!0}),this.myRequest(i,a,"get").then((function(n){e.hideLoading(),t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:492"),0==n.data.status&&(s.getInquiryInfo(c),s.getDeputyQuotation())})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}));break;case"unMatch":this.tapUnmatch();break;case"trade":e.showToast({title:"开发中",icon:"none",duration:1e3});break;case"closing":this.closing();break;case"setQuote":e.navigateTo({url:"/pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice?quotationNumber="+n[1],success:function(t){},fail:function(){},complete:function(){}});break}},submit:function(){e.navigateTo({url:"/pages/qing-f-c/inquiryManage/directorQuotePrice?inquiryNumber="+c,success:function(t){},fail:function(){},complete:function(){}})},bindCancel:function(){e.showToast({title:"待开发",icon:"none"})}}};n.default=p}).call(this,i("0de9")["default"],i("6e42")["default"])},ade0:function(t,n,i){"use strict";i.r(n);var e=i("3294"),a=i("f2b0");for(var u in a)"default"!==u&&function(t){i.d(n,t,(function(){return a[t]}))}(u);i("47bd");var o,r=i("f0c5"),s=Object(r["a"])(a["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],o);n["default"]=s.exports},f2b0:function(t,n,i){"use strict";i.r(n);var e=i("4dad"),a=i.n(e);for(var u in e)"default"!==u&&function(t){i.d(n,t,(function(){return e[t]}))}(u);n["default"]=a.a}},[["0523","common/runtime","common/vendor"]]]);