(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/inquiryManage/inquiry-details"],{"0523":function(t,n,i){"use strict";(function(t){i("3b9b"),i("921b");e(i("66fd"));var n=e(i("ade0"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,i("6e42")["createPage"])},"46a7":function(t,n,i){},"47bd":function(t,n,i){"use strict";var e=i("46a7"),a=i.n(e);a.a},"4dad":function(t,n,i){"use strict";(function(t,e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,u,o=function(){i.e("components/popupMe").then(function(){return resolve(i("cb0f"))}.bind(null,i)).catch(i.oe)},s=function(){i.e("components/popupMeUnmatch").then(function(){return resolve(i("46a6"))}.bind(null,i)).catch(i.oe)},c=function(){i.e("components/uni-icons/uni-icons").then(function(){return resolve(i("2cee"))}.bind(null,i)).catch(i.oe)},r=function(){i.e("components/inquiry/baojia-list-buy").then(function(){return resolve(i("3d9b"))}.bind(null,i)).catch(i.oe)},l=function(){i.e("components/inquiry/baojia-list-direct").then(function(){return resolve(i("cedf"))}.bind(null,i)).catch(i.oe)},g=function(){i.e("components/sample-inquiry/chanpinyaosu-quote").then(function(){return resolve(i("dd41"))}.bind(null,i)).catch(i.oe)},f=function(){i.e("components/popupMe-copy").then(function(){return resolve(i("43c0"))}.bind(null,i)).catch(i.oe)},d={components:{popupMe:o,uniIcon:c,baojiaList:r,baojiaListDirect:l,chanpinyaosu:g,popupCopy:f,popupMeUnmatch:s},data:function(){return{items:[{id:"1",label:"品质问题"},{id:"2",label:"价格因素"},{id:"3",label:"货期原因"},{id:"4",label:"其他"}],closeItems:[{id:"1",label:"价格高"},{id:"2",label:"货期不符"},{id:"3",label:"品质不匹配"},{id:"4",label:"客户以丢单"},{id:"5",label:"录入错误"},{id:"6",label:"其他"}],isMatch:!0,unMatch:"",closing:"",inquiryInfo:"",inquiry:"",quotationList:[],directQuotion:[],isDoRefresh:!1,quotationNumber:"",pageNum:1,pageSize:10}},onShow:function(){var t=getCurrentPages(),n=t[t.length-1];1==n.data.isDoRefresh&&(n.data.isDoRefresh=!1,a.getInquiryInfo(u),a.getDeputyQuotation(),a.getDirectQuotation()),a.getInquiryInfo(u),a.getDeputyQuotation(),a.getDirectQuotation()},onLoad:function(t){a=this,u=t.inquiryNumber,this.getInquiryInfo(u),this.getDeputyQuotation(),a.getDirectQuotation()},methods:{getDirectQuotation:function(){var n={inquiryNumber:u},i=this.Api.directPriceList;this.myRequest(n,i,"get").then((function(n){t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:224"),0==n.data.status&&(a.directQuotion=n.data.data.list,t("log","直接报价",a.directQuotion," at pages/qing-f-c/inquiryManage/inquiry-details.vue:227"))})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},getInquiryInfo:function(n){var i={inquiryNumber:n},e=this.Api.zyDetails;this.myRequest(i,e,"get").then((function(n){t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:244"),a.inquiryInfo=n.data.data.goInitialSample,a.inquiry=n.data.data.inquiry,t("log",a.inquiryInfo," at pages/qing-f-c/inquiryManage/inquiry-details.vue:247")})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},getDeputyQuotation:function(){var n={inquiryNumber:u,pageNum:a.pageNum,pageSize:a.pageSize},i=this.Api.buyerQuotation;this.myRequest(n,i,"get").then((function(n){t("log","报价单列表",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:264"),a.quotationList=n.data.data.list,t("log",a.quotationList," at pages/qing-f-c/inquiryManage/inquiry-details.vue:266")})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},tapClosing:function(){4!=a.inquiryInfo.inquiryStatusCode&&9!=a.inquiryInfo.inquiryStatusCode&&this.$refs.closingRef.show()},tapUnmatch:function(){this.$refs.unMatchRef.show()},getContent:function(n,i){switch(t("log",i," at pages/qing-f-c/inquiryManage/inquiry-details.vue:285"),n){case"unMatchRef":this.unMatch=i,this.unMatchFunc(),t("log",this.unMatch," at pages/qing-f-c/inquiryManage/inquiry-details.vue:290");break;case"closingRef":this.closing=i,this.closingInquiry(),t("log",this.closing," at pages/qing-f-c/inquiryManage/inquiry-details.vue:295");break;case"toCopyInquiry":var u=JSON.stringify(a.inquiryInfo);e.navigateTo({url:"/pages/qing-f-c/inquiryManage/inquiry-created-copy?data="+u+"&inquiryType=1",success:function(t){},fail:function(){},complete:function(){}});break}},closingInquiry:function(n){var i=a.closeItems[a.closing].label,e={inquiryNumber:u,buyDeputyRemarks:i},o=this.Api.buyDeputyClose;this.myRequest(e,o,"get").then((function(n){t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:318"),0==n.data.status&&(a.getInquiryInfo(u),a.getDeputyQuotation())})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},toCopyInquiry:function(){this.$refs.copyInquiry.show()},toDetail:function(n){t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:339"),e.navigateTo({url:"/pages/qing-f-c/inquiryManage/quotedPrice/quotedPrice?quoteNumber="+n})},backto:function(){e.navigateBack({delta:1})},swtichMatch:function(t){this.isMatch=!this.isMatch},pushSellerQuote:function(){var n={inquiryNumber:a.inquiry.inquiryNumber},i=this.Api.push;e.showLoading({title:"提交中",mask:!0}),this.myRequest(n,i,"get").then((function(n){e.hideLoading(),t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:367"),0==n.data.status?(e.showToast({title:"已推送",duration:1e3}),a.getInquiryInfo(u),a.getDeputyQuotation()):e.showToast({title:n.data.message,icon:"none"})})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},closingQuote:function(n){var i={quotationNumber:a.quotationNumber,sellDeputyRemarks:a.closing},o=this.Api.buyDeputySuited;e.showLoading({title:"提交中",mask:!0}),this.myRequest(i,o,"get").then((function(n){e.hideLoading(),t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:402"),0==n.data.status&&(a.getInquiryInfo(u),a.getDeputyQuotation())})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},unMatchFunc:function(n){var i=a.items[a.unMatch].label,o={quotationNumber:a.quotationNumber,buyDeputyRemarks:i},s=this.Api.buyDeputyUnsuited;e.showLoading({title:"提交中",mask:!0}),this.myRequest(o,s,"get").then((function(n){e.hideLoading(),t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:428"),0==n.data.status&&(a.getInquiryInfo(u),a.getDeputyQuotation())})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}))},handleEvent:function(n){switch(t("log",n[0]," at pages/qing-f-c/inquiryManage/inquiry-details.vue:442"),t("log",n[1]," at pages/qing-f-c/inquiryManage/inquiry-details.vue:443"),a.quotationNumber=n[1],n[0]){case"sure":var i={quotationNumber:a.quotationNumber},o=this.Api.buyDeputySuited;e.showLoading({title:"提交中",mask:!0}),this.myRequest(i,o,"get").then((function(n){e.hideLoading(),t("log",n," at pages/qing-f-c/inquiryManage/inquiry-details.vue:457"),0==n.data.status&&(a.getInquiryInfo(u),a.getDeputyQuotation())})).catch((function(t){wx.showToast({title:t.data.errMsg,icon:"none"})}));break;case"unMatch":this.tapUnmatch();break;case"trade":e.showToast({title:"开发中",icon:"none",duration:1e3});break;case"closing":this.closing();break;case"setQuote":e.navigateTo({url:"/pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice?quotationNumber="+n[1],success:function(t){},fail:function(){},complete:function(){}});break}},submit:function(){e.navigateTo({url:"/pages/qing-f-c/inquiryManage/directorQuotePrice?inquiryNumber="+u,success:function(t){},fail:function(){},complete:function(){}})},bindCancel:function(){e.showToast({title:"待开发",icon:"none"})}}};n.default=d}).call(this,i("0de9")["default"],i("6e42")["default"])},ade0:function(t,n,i){"use strict";i.r(n);var e=i("c6e1"),a=i("f2b0");for(var u in a)"default"!==u&&function(t){i.d(n,t,(function(){return a[t]}))}(u);i("47bd");var o,s=i("f0c5"),c=Object(s["a"])(a["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],o);n["default"]=c.exports},c6e1:function(t,n,i){"use strict";var e,a=function(){var t=this,n=t.$createElement;t._self._c},u=[];i.d(n,"b",(function(){return a})),i.d(n,"c",(function(){return u})),i.d(n,"a",(function(){return e}))},f2b0:function(t,n,i){"use strict";i.r(n);var e=i("4dad"),a=i.n(e);for(var u in e)"default"!==u&&function(t){i.d(n,t,(function(){return e[t]}))}(u);n["default"]=a.a}},[["0523","common/runtime","common/vendor"]]]);