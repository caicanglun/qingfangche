(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/inquiryManage/inquiry-created"],{"1c74":function(e,t,i){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){return i.e("components/pickerButton-edit").then(i.bind(null,"1015"))},s=function(){return i.e("components/myPicker-inquiry").then(i.bind(null,"bd6e"))},u=function(){return i.e("components/partCheckboxGroup").then(i.bind(null,"c8bc"))},c=function(){return i.e("components/myPickerSmall").then(i.bind(null,"3209"))},o=function(){return i.e("components/switchButton-auto").then(i.bind(null,"12e7"))},d=function(){return i.e("components/switchButton-edit").then(i.bind(null,"2cc1"))},l=function(){return i.e("components/pickerInput").then(i.bind(null,"f107"))},g=function(){return i.e("components/uni-icons/uni-icons").then(i.bind(null,"2cee"))},h=function(){return i.e("components/popupMe").then(i.bind(null,"cb0f"))},y={components:{pickerButton:r,myPicker:s,partCheckboxGroup:u,myPickerSmall:c,switchButton:o,pickerInput:l,uniIcon:g,popupMe:h,switchButtonEdit:d},data:function(){return{clothBreadth:"",tradeName:"",content:"",spec_longitude:"",spec_latitude:"",organize:"",style:"",grammage:"",density_latitude:"",density_longitude:"",purchaseQuantity:"",guamalv:"",remarks:"",inquiryType:[],inquiryTypeIndex:1,densityUnit:[],densityUnitIndex:1,grammageUnit:[],grammageUnitIndex:2,lengthUnit:[],lengthUnitIndex:1,productSerial:[],productSerialIndex:"",productSerialValue:"",buyer:"",buyerCode:"",productType:"",productTypeIndex:1,styleSerial:[],styleSerialIndex:"",styleSerialValue:"",qualityPosition:[],qualityPositionIndex:"",part:[],partID:[],partList:[],partListLong:[],partLong:[],partLongID:[],sampleType:[],sampleTypeIndex:1,newPartText:"",newPartLongText:"",styleCode:"",pictures:[],tempFiles:[]}},onLoad:function(t){a=this,t.inquiryType?this.inquiryTypeIndex=t.inquiryType:this.inquiryTypeIndex=2,t.number&&(this.number=t.number),e("log",this.inquiryTypeIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:312"),this.getAllSelect()},methods:{selectBuyer:function(){n.navigateTo({url:"/pages/qing-f-c/inquiryManage/selectBuyer",success:function(e){},fail:function(){},complete:function(){}})},test:function(){var t="http://show.jkfb.net.cn:8080/aiwc-show/show/city?cityCode=yuyao",i={};this.myRequest(i,t,"get").then(function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:328")}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})},getAllSelect:function(){var t=this,i=this.Api.getMainProduct,n={};this.myRequest(n,i,"get").then(function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:341"),a.productType=t.data.data.list}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}),i=this.Api.inquiryType,n={},this.myRequest(n,i,"get").then(function(i){e("log",i," at pages/qing-f-c/inquiryManage/inquiry-created.vue:353"),a.inquiryType=i.data.data.list,a.inquiryType.forEach(function(e){e.id==a.inquiryTypeIndex&&t.$set(e,"isChecked",!0)})}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}),i=this.Api.series,n={},this.myRequest(n,i,"get").then(function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:370"),a.productSerial=t.data.data.list}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}),i=this.Api.style,n={},this.myRequest(n,i,"get").then(function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:382"),a.styleSerial=t.data.data.list}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}),i=this.Api.clothType,n={},this.myRequest(n,i,"get").then(function(i){e("log",i," at pages/qing-f-c/inquiryManage/inquiry-created.vue:394"),a.sampleType=i.data.data.list,a.sampleType=t.setIsChecked(a.sampleType,a.sampleTypeIndex)}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}),i=this.Api.densityUnit,n={},this.myRequest(n,i,"get").then(function(i){e("log",i," at pages/qing-f-c/inquiryManage/inquiry-created.vue:407"),a.densityUnit=i.data.data.list,a.densityUnit=t.setIsChecked(a.densityUnit,a.densityUnitIndex)}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}),i=this.Api.gramWeightUnit,n={},this.myRequest(n,i,"get").then(function(i){e("log",i," at pages/qing-f-c/inquiryManage/inquiry-created.vue:420"),a.grammageUnit=i.data.data.list,a.grammageUnit=t.setIsChecked(a.grammageUnit,a.grammageUnitIndex),e("log",a.grammageUnit," at pages/qing-f-c/inquiryManage/inquiry-created.vue:424")}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}),i=this.Api.quantityUnit,n={},this.myRequest(n,i,"get").then(function(i){e("log",i," at pages/qing-f-c/inquiryManage/inquiry-created.vue:435"),a.lengthUnit=i.data.data.list,a.lengthUnit=t.setIsChecked(a.lengthUnit,a.lengthUnitIndex)}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}),i=this.Api.atom,n={},this.myRequest(n,i,"get").then(function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:448"),a.partList=t.data.data.list}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}),this.myRequest(n,i,"get").then(function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:459"),a.partListLong=t.data.data.list}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}),i=this.Api.getQuality,n={},this.myRequest(n,i,"get").then(function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:472"),a.qualityPosition=t.data.data.list}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})},tapPartSelect:function(t,i){var n=this.partList;this.part=t,this.partID=i;for(var a=0,r=n.length;a<r;++a){var s=n[a];t.includes(s.label)?this.$set(s,"isChecked",!0):this.$set(s,"isChecked",!1)}e("log",this.partID," at pages/qing-f-c/inquiryManage/inquiry-created.vue:500")},tapPartLongSelect:function(t,i){var n=this.partListLong;this.partLong=t,this.partLongID=i;for(var a=0,r=n.length;a<r;++a){var s=n[a];t.includes(s.label)?this.$set(s,"isChecked",!0):this.$set(s,"isChecked",!1)}e("log",this.partLongID," at pages/qing-f-c/inquiryManage/inquiry-created.vue:516")},tapNewPart:function(){this.$refs.latiPart.show()},tapNewPartLong:function(){this.$refs.longtiPart.show()},getContent:function(t,i){var a=this;this.newPartText=i,e("log",this.newPartText," at pages/qing-f-c/inquiryManage/inquiry-created.vue:527");var r=this.Api.atomAdd,s={atomName:this.newPartText};n.showLoading({title:"创建中",mask:!0}),this.myRequest(s,r,"get").then(function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:537"),n.hideLoading(),0==t.data.status&&a.getAllSelect()}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})},tapPaste:function(){this.spec_latitude=this.spec_longitude},tabSwitchChange:function(t,i){var n=this;switch(t){case"sampleType":this.sampleTypeIndex=i,this.sampleType.forEach(function(e){e.id==n.sampleTypeIndex?n.$set(e,"isChecked",!0):n.$set(e,"isChecked",!1)}),e("log",this.sampleTypeIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:569");break;case"inquiryType":this.inquiryTypeIndex=i,this.inquiryType.forEach(function(e){e.id==n.inquiryTypeIndex?n.$set(e,"isChecked",!0):n.$set(e,"isChecked",!1)}),e("log",this.inquiryTypeIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:580");break;case"styleChange":e("log",i," at pages/qing-f-c/inquiryManage/inquiry-created.vue:584"),this.styleSerialIndex=i[1]||-1,this.styleSerialValue=i[0],"平纹"==this.styleSerialValue&&(this.organize="1/1");break;case"productSerial":this.productSerialIndex=i[1]||-1,this.productSerialValue=i[0],e("log",this.productSerialIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:596"),e("log",this.productSerialValue," at pages/qing-f-c/inquiryManage/inquiry-created.vue:597");break;case"densityUnit":this.densityUnitIndex=i,e("log",this.densityUnitIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:601");break;case"grammageUnit":this.grammageUnitIndex=i,this.grammageUnit.forEach(function(e){e.id==n.grammageUnitIndex?n.$set(e,"isChecked",!0):n.$set(e,"isChecked",!1)}),e("log",this.grammageUnitIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:612");break;case"qualityPosition":this.qualityPositionIndex=i,e("log",this.qualityPositionIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:616");break;case"lengthUnit":this.lengthUnitIndex=i,e("log",this.lengthUnitIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:620");break;case"productType":this.productTypeIndex=i,e("log",this.productTypeIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:624");break}},pickImage:function(){n.chooseImage({sizeType:["compressed"],success:function(t){var i=t.tempFilePaths;a.pictures=[];for(var r=0;r<i.length;r++)n.uploadFile({url:a.Api.upload,filePath:i[r],name:"file",success:function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:640"),a.pictures.push(JSON.parse(t.data).data.msg),n.showToast({title:"上传成功",icon:"none",duration:1e3})}})}})},bindCancel:function(){n.navigateBack({delta:1})},submit:function(){var t=this;a.styleSerial.forEach(function(e){e.id==a.styleSerialIndex&&e.label!=a.styleSerialValue&&(t.styleSerialIndex=-1)}),a.productSerial.forEach(function(e){e.id==a.productSerialIndex&&e.label!=a.productSerialValue&&(t.productSerialIndex=-1)});var i={number:a.number,inquiryType:a.inquiryTypeIndex,buyOrSellCode:a.buyerCode,purchaseQuantity:a.purchaseQuantity,quantityUnit:a.lengthUnitIndex,hangBitRate:a.guamalv,remarks:a.remarks,tradeName:a.tradeName,seriesCode:a.productSerialIndex,seriesName:a.productSerialValue,ingredientLongitudes:a.partID,ingredientLatitudes:a.partLongID,content:a.content,mainProduct:a.productTypeIndex,specificationLongitude:a.spec_longitude,specificationLatitude:a.spec_latitude,styleCode:a.styleSerialIndex,styleName:a.styleSerialValue,organization:a.organize,clothType:a.sampleTypeIndex,densityLongitude:a.density_longitude,densityLatitude:a.density_latitude,densityUnit:a.densityUnitIndex,gramWeight:a.grammage,gramWeightUnit:a.grammageUnitIndex,clothBreadth:a.clothBreadth,qualityCode:a.qualityPositionIndex,pictures:a.pictures};if(1!=a.grammageUnitIndex||0!=a.clothBreadth){e("log",i," at pages/qing-f-c/inquiryManage/inquiry-created.vue:723"),n.showLoading({title:"加载中",mask:!0});var r=this.Api.addInquiry;this.myRequest(i,r,"post").then(function(t){if(e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:730"),n.hideLoading(),0==t.data.status){n.showToast({title:"询价单创建成功",icon:"none",duration:500});var i=getCurrentPages(),r=(i[i.length-1],i[i.length-2]);r.setData({isDoRefresh:!0}),1==a.inquiryTypeIndex?n.redirectTo({url:"/pages/qing-f-c/inquiryManage/inquiry-details?inquiryNumber="+t.data.data.msg,success:function(e){},fail:function(){},complete:function(){}}):n.redirectTo({url:"/pages/qing-f-c/inquiryManage/sampleInquiry/buyDeputy/inquiry-details?inquiryNumber="+t.data.data.msg,success:function(e){},fail:function(){},complete:function(){}})}else n.showToast({title:t.data.message,icon:"none"})}).catch(function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})}else n.showToast({title:"幅宽必填",icon:"none",duration:500})}}};t.default=y}).call(this,i("0de9")["default"],i("6e42")["default"])},"221d":function(e,t,i){"use strict";(function(e){i("3b9b"),i("921b");n(i("66fd"));var t=n(i("c1d9"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},"8ad2":function(e,t,i){},"9bc2":function(e,t,i){"use strict";i.r(t);var n=i("1c74"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,function(){return n[e]})}(r);t["default"]=a.a},"9d03":function(e,t,i){"use strict";var n,a=function(){var e=this,t=e.$createElement;e._self._c},r=[];i.d(t,"b",function(){return a}),i.d(t,"c",function(){return r}),i.d(t,"a",function(){return n})},b475:function(e,t,i){"use strict";var n=i("8ad2"),a=i.n(n);a.a},c1d9:function(e,t,i){"use strict";i.r(t);var n=i("9d03"),a=i("9bc2");for(var r in a)"default"!==r&&function(e){i.d(t,e,function(){return a[e]})}(r);i("b475");var s,u=i("f0c5"),c=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=c.exports}},[["221d","common/runtime","common/vendor"]]]);