(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/inquiryManage/inquiry-created"],{"015d":function(e,t,n){"use strict";var i,a=function(){var e=this,t=e.$createElement;e._self._c},s=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}))},"1c74":function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,s=function(){n.e("components/pickerButton-edit").then(function(){return resolve(n("1015"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/myPicker-inquiry").then(function(){return resolve(n("bd6e"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/partCheckboxGroup").then(function(){return resolve(n("c8bc"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/myPickerSmall").then(function(){return resolve(n("3209"))}.bind(null,n)).catch(n.oe)},o=function(){n.e("components/switchButton-auto").then(function(){return resolve(n("12e7"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/switchButton-edit").then(function(){return resolve(n("2cc1"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/pickerInput").then(function(){return resolve(n("f107"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/uni-icons/uni-icons").then(function(){return resolve(n("2cee"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/popupMe").then(function(){return resolve(n("cb0f"))}.bind(null,n)).catch(n.oe)},p=function(){Promise.all([n.e("common/vendor"),n.e("components/p-inputSearch/inputSearch")]).then(function(){return resolve(n("e014"))}.bind(null,n)).catch(n.oe)},y={components:{pickerButton:s,myPicker:r,partCheckboxGroup:u,myPickerSmall:c,switchButton:o,pickerInput:l,uniIcon:g,popupMe:h,switchButtonEdit:d,inputSearch:p},data:function(){return{clothBreadth:"",tradeName:"",content:"",spec_longitude:"",spec_latitude:"",organize:"",style:"",grammage:"",density_latitude:"",density_longitude:"",purchaseQuantity:"",guamalv:"",remarks:"",inquiryType:[],inquiryTypeIndex:1,densityUnit:[],densityUnitIndex:2,grammageUnit:[],grammageUnitIndex:2,lengthUnit:[],lengthUnitIndex:1,productSerial:[],productSerialIndex:"",productSerialValue:"",buyer:"",buyerCode:"",productType:"",productTypeIndex:1,styleSerial:[],styleSerialIndex:"",styleSerialValue:"",qualityPosition:[],qualityPositionIndex:"",part:[],partID:[],partList:[],partListLong:[],partLong:[],partLongID:[],sampleType:[],sampleTypeIndex:1,newPartText:"",newPartLongText:"",styleCode:"",pictures:[],tempFiles:[]}},onLoad:function(t){a=this,t.inquiryType?this.inquiryTypeIndex=t.inquiryType:this.inquiryTypeIndex=2,t.number&&(this.number=t.number),e("log",this.inquiryTypeIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:312"),this.getAllSelect()},methods:{handleChange:function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:317"),this.spec_longitude=t},handleInput:function(e){this.spec_longitude=e},handleChangeLati:function(e){this.spec_latitude=e},handleInputLati:function(e){this.spec_latitude=e},selectBuyer:function(){i.navigateTo({url:"/pages/qing-f-c/inquiryManage/selectBuyer",success:function(e){},fail:function(){},complete:function(){}})},test:function(){var t="http://show.jkfb.net.cn:8080/aiwc-show/show/city?cityCode=yuyao",n={};this.myRequest(n,t,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:341")})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}))},getAllSelect:function(){var t=this,n=this.Api.getMainProduct,i={};this.myRequest(i,n,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:354"),a.productType=t.data.data.list})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),n=this.Api.inquiryType,i={},this.myRequest(i,n,"get").then((function(n){e("log",n," at pages/qing-f-c/inquiryManage/inquiry-created.vue:366"),a.inquiryType=n.data.data.list,a.inquiryType.forEach((function(e){e.id==a.inquiryTypeIndex&&t.$set(e,"isChecked",!0)}))})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),n=this.Api.series,i={},this.myRequest(i,n,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:383"),a.productSerial=t.data.data.list})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),n=this.Api.style,i={},this.myRequest(i,n,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:395"),a.styleSerial=t.data.data.list})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),n=this.Api.clothType,i={},this.myRequest(i,n,"get").then((function(n){e("log",n," at pages/qing-f-c/inquiryManage/inquiry-created.vue:407"),a.sampleType=n.data.data.list,a.sampleType=t.setIsChecked(a.sampleType,a.sampleTypeIndex)})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),n=this.Api.densityUnit,i={},this.myRequest(i,n,"get").then((function(n){e("log",n," at pages/qing-f-c/inquiryManage/inquiry-created.vue:420"),a.densityUnit=n.data.data.list,a.densityUnit=t.setIsChecked(a.densityUnit,a.densityUnitIndex),e("log",a.densityUnit," at pages/qing-f-c/inquiryManage/inquiry-created.vue:423")})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),n=this.Api.gramWeightUnit,i={},this.myRequest(i,n,"get").then((function(n){e("log",n," at pages/qing-f-c/inquiryManage/inquiry-created.vue:434"),a.grammageUnit=n.data.data.list,a.grammageUnit=t.setIsChecked(a.grammageUnit,a.grammageUnitIndex),e("log",a.grammageUnit," at pages/qing-f-c/inquiryManage/inquiry-created.vue:438")})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),n=this.Api.quantityUnit,i={},this.myRequest(i,n,"get").then((function(n){e("log",n," at pages/qing-f-c/inquiryManage/inquiry-created.vue:449"),a.lengthUnit=n.data.data.list,a.lengthUnit=t.setIsChecked(a.lengthUnit,a.lengthUnitIndex)})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),n=this.Api.atom,i={},this.myRequest(i,n,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:462"),a.partList=t.data.data.list})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),this.myRequest(i,n,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:473"),a.partListLong=t.data.data.list})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),n=this.Api.getQuality,i={},this.myRequest(i,n,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:486"),a.qualityPosition=t.data.data.list})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}))},tapPartSelect:function(t,n){var i=this.partList;this.part=t,this.partID=n;for(var a=0,s=i.length;a<s;++a){var r=i[a];t.includes(r.label)?this.$set(r,"isChecked",!0):this.$set(r,"isChecked",!1)}e("log",this.partID," at pages/qing-f-c/inquiryManage/inquiry-created.vue:514")},tapPartLongSelect:function(t,n){var i=this.partListLong;this.partLong=t,this.partLongID=n;for(var a=0,s=i.length;a<s;++a){var r=i[a];t.includes(r.label)?this.$set(r,"isChecked",!0):this.$set(r,"isChecked",!1)}e("log",this.partLongID," at pages/qing-f-c/inquiryManage/inquiry-created.vue:530")},tapNewPart:function(){this.$refs.latiPart.show()},tapNewPartLong:function(){this.$refs.longtiPart.show()},getContent:function(t,n){var a=this;this.newPartText=n,e("log",this.newPartText," at pages/qing-f-c/inquiryManage/inquiry-created.vue:541");var s=this.Api.atomAdd,r={atomName:this.newPartText};i.showLoading({title:"创建中",mask:!0}),this.myRequest(r,s,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:551"),i.hideLoading(),0==t.data.status&&a.getAllSelect()})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}))},tapPaste:function(){this.$refs.specLati.name=this.spec_longitude,this.spec_latitude=this.spec_longitude},tabSwitchChange:function(t,n){var i=this;switch(t){case"sampleType":this.sampleTypeIndex=n,this.sampleType.forEach((function(e){e.id==i.sampleTypeIndex?i.$set(e,"isChecked",!0):i.$set(e,"isChecked",!1)})),e("log",this.sampleTypeIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:584");break;case"inquiryType":this.inquiryTypeIndex=n,this.inquiryType.forEach((function(e){e.id==i.inquiryTypeIndex?i.$set(e,"isChecked",!0):i.$set(e,"isChecked",!1)})),e("log",this.inquiryTypeIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:595");break;case"styleChange":e("log",n," at pages/qing-f-c/inquiryManage/inquiry-created.vue:599"),this.styleSerialIndex=n[1]||-1,this.styleSerialValue=n[0],"平纹"==this.styleSerialValue&&(this.organize="1/1");break;case"productSerial":this.productSerialIndex=n[1]||-1,this.productSerialValue=n[0],e("log",this.productSerialIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:611"),e("log",this.productSerialValue," at pages/qing-f-c/inquiryManage/inquiry-created.vue:612");break;case"densityUnit":this.densityUnitIndex=n,e("log",this.densityUnitIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:616");break;case"grammageUnit":this.grammageUnitIndex=n,this.grammageUnit.forEach((function(e){e.id==i.grammageUnitIndex?i.$set(e,"isChecked",!0):i.$set(e,"isChecked",!1)})),e("log",this.grammageUnitIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:627");break;case"qualityPosition":this.qualityPositionIndex=n,e("log",this.qualityPositionIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:631");break;case"lengthUnit":this.lengthUnitIndex=n,e("log",this.lengthUnitIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:635");break;case"productType":this.productTypeIndex=n,e("log",this.productTypeIndex," at pages/qing-f-c/inquiryManage/inquiry-created.vue:639");break}},pickImage:function(){i.chooseImage({sizeType:["compressed"],success:function(t){var n=t.tempFilePaths;a.pictures=[];for(var s=0;s<n.length;s++)i.uploadFile({url:a.Api.upload,filePath:n[s],name:"file",success:function(t){e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:655"),a.pictures.push(JSON.parse(t.data).data.msg),i.showToast({title:"上传成功",icon:"none",duration:1e3})}})}})},bindCancel:function(){i.navigateBack({delta:1})},submit:function(){var t=this;a.styleSerial.forEach((function(e){e.id==a.styleSerialIndex&&e.label!=a.styleSerialValue&&(t.styleSerialIndex=-1)})),a.productSerial.forEach((function(e){e.id==a.productSerialIndex&&e.label!=a.productSerialValue&&(t.productSerialIndex=-1)}));var n={number:a.number,inquiryType:a.inquiryTypeIndex,buyOrSellCode:a.buyerCode,purchaseQuantity:a.purchaseQuantity,quantityUnit:a.lengthUnitIndex,hangBitRate:a.guamalv,remarks:a.remarks,tradeName:a.tradeName,seriesCode:a.productSerialIndex,seriesName:a.productSerialValue,ingredientLongitudes:a.partID,ingredientLatitudes:a.partLongID,content:a.content,mainProduct:a.productTypeIndex,specificationLongitude:a.spec_longitude,specificationLatitude:a.spec_latitude,styleCode:a.styleSerialIndex,styleName:a.styleSerialValue,organization:a.organize,clothType:a.sampleTypeIndex,densityLongitude:a.density_longitude,densityLatitude:a.density_latitude,densityUnit:a.densityUnitIndex,gramWeight:a.grammage,gramWeightUnit:a.grammageUnitIndex,clothBreadth:a.clothBreadth,qualityCode:a.qualityPositionIndex,pictures:a.pictures};if(1!=a.grammageUnitIndex||0!=a.clothBreadth){e("log",n," at pages/qing-f-c/inquiryManage/inquiry-created.vue:738"),i.showLoading({title:"加载中",mask:!0});var s=this.Api.addInquiry;this.myRequest(n,s,"post").then((function(t){if(e("log",t," at pages/qing-f-c/inquiryManage/inquiry-created.vue:745"),i.hideLoading(),0==t.data.status){i.showToast({title:"询价单创建成功",icon:"none",duration:500});var n=getCurrentPages(),s=(n[n.length-1],n[n.length-2]);s.setData({isDoRefresh:!0}),1==a.inquiryTypeIndex?i.redirectTo({url:"/pages/qing-f-c/inquiryManage/inquiry-details?inquiryNumber="+t.data.data.msg,success:function(e){},fail:function(){},complete:function(){}}):i.redirectTo({url:"/pages/qing-f-c/inquiryManage/sampleInquiry/buyDeputy/inquiry-details?inquiryNumber="+t.data.data.msg,success:function(e){},fail:function(){},complete:function(){}})}else i.showToast({title:t.data.message,icon:"none"})})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}))}else i.showToast({title:"幅宽必填",icon:"none",duration:500})}}};t.default=y}).call(this,n("0de9")["default"],n("6e42")["default"])},"221d":function(e,t,n){"use strict";(function(e){n("3b9b"),n("921b");i(n("66fd"));var t=i(n("c1d9"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"9bc2":function(e,t,n){"use strict";n.r(t);var i=n("1c74"),a=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=a.a},b475:function(e,t,n){"use strict";var i=n("ed8e"),a=n.n(i);a.a},c1d9:function(e,t,n){"use strict";n.r(t);var i=n("015d"),a=n("9bc2");for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n("b475");var r,u=n("f0c5"),c=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=c.exports},ed8e:function(e,t,n){}},[["221d","common/runtime","common/vendor"]]]);