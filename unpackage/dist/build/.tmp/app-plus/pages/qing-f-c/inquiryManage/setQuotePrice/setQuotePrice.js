(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice"],{6722:function(e,t,i){"use strict";var a=i("7b92"),n=i.n(a);n.a},"7b92":function(e,t,i){},"7c06":function(e,t,i){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,s=function(){i.e("components/switchButton-auto").then(function(){return resolve(i("12e7"))}.bind(null,i)).catch(i.oe)},u=function(){i.e("components/switchButton-edit").then(function(){return resolve(i("2cc1"))}.bind(null,i)).catch(i.oe)},c={components:{switchButton:u,switchButtonOne:s},computed:{returnLabel:function(){var e="";return this.unit.forEach((function(t){t.id==n.unitIndex&&(e=t.label)})),e}},data:function(){return{quoteList:{},quotePrice:"",brokerage:[],brokerageIndex:1,taxes:[],taxedIndex:1,carriage:[],carriageIndex:0,unit:[],unitIndex:1,upUnit:1,carriagePrice:0,brokerageRate:"",remark:"",carriageSwitch:!0,finalPrice:"",unitRate:1,includeTaxes:1,carriageContent:"",upTax:0,downTax:0}},onshow:function(){},onLoad:function(e){n=this,r=e.quotationNumber,this.getSelect()},methods:{carriageFunc:function(){this.carriagePrice=this.carriageContent,1==this.brokerageIndex?this.rule1():this.rule2()},rule1:function(){e("log","报价",this.quotePrice," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:223"),e("log","佣金",this.brokerageRate," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:224"),e("log","含税",this.includeTaxes," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:225"),e("log","运费单价1",this.carriagePrice," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:226"),this.includeTaxes=this.upTax-this.downTax,e("log",this.upTax," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:228"),e("log",this.downTax," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:229"),e("log","税比例",this.includeTaxes," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:230"),e("log","mima",this.unitRate," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:231"),this.setUnit(),1==this.brokerageIndex&&(1==n.unitIndex?this.finalPrice=((this.quotePrice/this.includeTaxes+this.carriagePrice/1)*(1+this.brokerageRate/100)*this.unitRate).toFixed(2):this.finalPrice=((this.quotePrice/this.includeTaxes+this.carriagePrice/1)*(1+this.brokerageRate/100)/this.unitRate).toFixed(2))},rule2:function(){e("log","报价",this.quotePrice," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:244"),e("log","佣金",this.brokerageRate," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:245"),e("log","运费单价",this.carriagePrice," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:246"),this.includeTaxes=this.upTax-this.downTax,e("log","税比例",this.includeTaxes," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:248"),this.setUnit(),""!=this.finalPrice&&2==this.brokerageIndex&&(e("log","daozheli"," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:259"),1==n.unitIndex?this.brokerageRate=(100*(this.finalPrice*n.unitRate/(this.quotePrice/this.includeTaxes+this.carriagePrice/1)-1)).toFixed(2):this.brokerageRate=(100*(this.finalPrice/n.unitRate/(this.quotePrice/this.includeTaxes+this.carriagePrice/1)-1)).toFixed(2))},setUnit:function(){this.unitIndex==this.upUnit?this.unitRate=1:this.unitRate=.9144},getSelect:function(){var t={},i=this.Api.computationRule;this.myRequest(t,i,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:280"),n.brokerage=t.data.data.list})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),i=this.Api.isIcash,this.myRequest(t,i,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:291"),n.carriage=t.data.data.list})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),i=this.Api.isPlusDuty,this.myRequest(t,i,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:302"),n.taxes=t.data.data.list})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),i=this.Api.priceUnit,this.myRequest(t,i,"get").then((function(t){e("log",t," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:313"),n.unit=t.data.data.list})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})})),i=this.Api.buyDeputySetDetails,t={quotationNumber:r},this.myRequest(t,i,"get").then((function(t){e("log","baojiadan",t," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:326"),n.quoteList=t.data.data,n.taxedIndex=n.quoteList.isPlusDutyCode,1==n.taxedIndex?(n.upTax=2.16,n.downTax=1.16):(n.upTax=2.08,n.downTax=1.08),n.arrChecked(n.unit,n.quoteList.priceUnit),n.arrChecked(n.taxes,n.quoteList.isPlusDutyCode),e("log","shuifei",n.taxes," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:339"),n.arrChecked(n.carriage,n.quoteList.isIcashCode),e("log",n.unit," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:341"),n.carriageIndex=n.quoteList.isIcashCode,n.unitIndex=n.quoteList.priceUnit,n.upUnit=n.quoteList.priceUnit,e("log","运费",n.carriageIndex," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:346"),e("log","税",n.taxedIndex," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:347"),e("log","单位",n.unitIndex," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:348"),n.quotePrice=parseFloat(t.data.data.unitPrice)})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}))},arrChecked:function(e,t){var i=this;e.forEach((function(e){e.id==t?i.$set(e,"isChecked",!0):i.$set(e,"isChecked",!1)}))},switchChange:function(t,i){switch(t){case"unit":this.arrChecked(this.unit,i),this.unitIndex=i,1==this.brokerageIndex?this.rule1():this.rule2(),e("log",this.unitIndex," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:382");break;case"carriage":this.arrChecked(this.carriage,i),this.carriageIndex=i,e("log",this.carriageIndex," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:387"),this.carriageSwitch=!this.carriageSwitch,0==this.carriageIndex&&(this.carriagePrice="",this.carriageContent=""),1==this.brokerageIndex?this.rule1():this.rule2();break;case"taxes":this.arrChecked(this.taxes,i),this.taxedIndex=i,e("log",this.taxedIndex," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:402"),1==this.taxedIndex?this.downTax=1.16:this.downTax=1.08,1==this.brokerageIndex?this.rule1():this.rule2();break;case"brokerage":this.arrChecked(this.brokerage,i),this.brokerageIndex=i,this.brokerageRate="",this.finalPrice="",e("log",this.brokerageIndex," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:420");break}},submit:function(){var t=this;if(1==n.carriageIndex&&n.carriagePrice<=0)a.showToast({title:"运费不能为零",icon:"none",duration:1e3});else if(n.finalPrice<=0)a.showToast({title:"报价不能为零",icon:"none",duration:1e3});else{var i={quotationNumber:n.quoteList.quotationNumber,basicsPrice:n.quotePrice,computationRule:n.brokerageIndex,isIcash:n.carriageIndex,isPlusDuty:n.taxedIndex,freight:n.carriagePrice||0,freightUnit:n.unitIndex,commissionRate:n.brokerageRate,remarks:n.remark,finalPrice:n.finalPrice,finalPriceUnit:n.unitIndex},r=this.Api.buyDeputySetPrice;a.showLoading({title:"",mask:!0}),this.myRequest(i,r,"post").then((function(i){a.hideLoading(),e("log",i," at pages/qing-f-c/inquiryManage/setQuotePrice/setQuotePrice.vue:466"),0==i.data.status?(a.showToast({title:"报价成功",icon:"none",duration:1e3}),t.refreshBack()):a.showToast({title:i.data.message,icon:"none",duration:1e3})})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}))}}}};t.default=c}).call(this,i("0de9")["default"],i("6e42")["default"])},"8d07":function(e,t,i){"use strict";(function(e){i("3b9b"),i("921b");a(i("66fd"));var t=a(i("cd42"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},ab31:function(e,t,i){"use strict";i.r(t);var a=i("7c06"),n=i.n(a);for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);t["default"]=n.a},c893:function(e,t,i){"use strict";var a,n=function(){var e=this,t=e.$createElement;e._self._c},r=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return a}))},cd42:function(e,t,i){"use strict";i.r(t);var a=i("c893"),n=i("ab31");for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);i("6722");var s,u=i("f0c5"),c=Object(u["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);t["default"]=c.exports}},[["8d07","common/runtime","common/vendor"]]]);