(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/regionalManager/customer-details"],{"0a2f":function(e,t,n){},"3c4a":function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=c(n("4795"));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n,o,a,i,c){try{var s=e[i](c),r=s.value}catch(u){return void n(u)}s.done?t(r):Promise.resolve(r).then(o,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function c(e){r(i,o,a,c,s,"next",e)}function s(e){r(i,o,a,c,s,"throw",e)}c(void 0)}))}}var l,g,f=function(){n.e("components/listShow").then(function(){return resolve(n("b9cb"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/uni-icons/uni-icons").then(function(){return resolve(n("2cee"))}.bind(null,n)).catch(n.oe)},p=n("b65b"),m=(a={components:{listShow:f,uniIcon:d},data:function(){return{counter:"",placeholdeView:!1,identity:2,linkMan:"",operation:"",rival:"",customerInfo:"",isProduct:!1,admin:!1,isDisplay:!1,activeIndex:-1,items:["公司信息","联系人","经营状况","竞争对手"],itemsSell:["公司信息","联系人","经营状况"],isDoRefresh:!1,companyCode:""}},onPullDownRefresh:function(){this.getCustomerInfo()},onShow:function(){var e=getCurrentPages(),t=e[e.length-1];1==t.data.isDoRefresh&&(t.data.isDoRefresh=!1,this.getCustomerInfo(),this.getLinkMan(),this.getOperation(),this.getRival()),this.getCounter()},onLoad:function(t){l=this,e("log",t," at pages/qing-f-c/regionalManager/customer-details.vue:366"),g=t.companyCode,this.companyCode=t.companyCode,this.getCustomerInfo(),this.getLinkMan(),this.getOperation(),this.getRival(),this.getCounter()},onPageScroll:function(e){e.scrollTop>180?this.isDisplay=!0:(this.isDisplay=!1,this.placeholdeView=!1)}},s(a,"components",{}),s(a,"props",{}),s(a,"methods",{getCounter:function(){var t=this;return u(i.default.mark((function n(){var o;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.get("/cm/title",{data:{companyCode:g}});case 2:o=n.sent,e("log",o," at pages/qing-f-c/regionalManager/customer-details.vue:392"),t.counter=o.data.data;case 5:case"end":return n.stop()}}),n)})))()},tabSwitch:function(e){switch(this.activeIndex=e,this.placeholdeView=!0,e){case 0:this.selectorQuery("#outView","#companyInfo");break;case 1:this.selectorQuery("#outView","#contact");break;case 2:this.selectorQuery("#outView","#condition");break;case 3:this.selectorQuery("#outView","#competitor");break}},selectorQuery:function(t,n){o.createSelectorQuery().select(t).boundingClientRect((function(t){o.createSelectorQuery().select(n).boundingClientRect((function(n){o.createSelectorQuery().select("#inTabbar").boundingClientRect((function(a){e("log",n.top,t.top,a.height," at pages/qing-f-c/regionalManager/customer-details.vue:419"),o.pageScrollTo({duration:0,scrollTop:n.top-t.top-a.height})})).exec()})).exec()})).exec()},backto:function(){o.navigateBack({delta:1})},getCustomerInfo:function(){var t=this;e("log",g," at pages/qing-f-c/regionalManager/customer-details.vue:437");var n={companyCode:g};p.cmDetail(n).then((function(n){e("log",n," at pages/qing-f-c/regionalManager/customer-details.vue:441"),t.customerInfo=n.data.data,e("log",t.customerInfo," at pages/qing-f-c/regionalManager/customer-details.vue:444")})).catch((function(t){e("log","Err===",t," at pages/qing-f-c/regionalManager/customer-details.vue:447")}))},getLinkMan:function(){var t=this,n={companyCode:g};p.linkMan(n).then((function(n){e("log",n," at pages/qing-f-c/regionalManager/customer-details.vue:455"),t.linkMan=n.data.data.list})).catch((function(t){e("log","Err===",t," at pages/qing-f-c/regionalManager/customer-details.vue:458")}))},getOperation:function(){var t={companyCode:g};p.operation(t).then((function(t){e("log","获取经营状况",t," at pages/qing-f-c/regionalManager/customer-details.vue:465"),l.operation=t.data.data})).catch((function(t){e("log","Err===",t," at pages/qing-f-c/regionalManager/customer-details.vue:468")}))},getRival:function(){var t=this,n={companyCode:g};p.rival(n).then((function(n){e("log","rival===",n," at pages/qing-f-c/regionalManager/customer-details.vue:475"),t.rival=n.data.data.list})).catch((function(t){e("log","Err===",t," at pages/qing-f-c/regionalManager/customer-details.vue:479")}))},toRecordDetails:function(){wx.navigateTo({url:"/pages/qing-f-c/customPicture/sd_followRecordDetail?companyCode=".concat(g)})},goMarginControl:function(){var e=this.customerInfo.id;wx.navigateTo({url:"/pages/jin-suo-yun/customer-admin/margin-control?userId="+e})},toBondDetail:function(){var e=this.customerInfo.id;2==this.customerInfo.type?wx.showToast({title:"开发中...",icon:"none"}):wx.navigateTo({url:"/pages/jin-suo-yun/customer-admin/bond-list?id="+e})},delCustomer:function(){o.showModal({title:"提示",content:"确认删除该客户吗？",success:function(t){if(t.confirm){var n={companyCode:g},a=l.Api.delCustomer;o.showLoading({title:"删除中",mask:!0}),l.myRequest(n,a,"get").then((function(t){e("log",t," at pages/qing-f-c/regionalManager/customer-details.vue:547"),0==t.data.status?(o.hideLoading(),o.showToast({title:"删除成功"}),setTimeout((function(){o.navigateBack({delta:-1})}),1e3)):o.showToast({title:t.data.message})})).catch((function(e){wx.showToast({title:e.data.errMsg,icon:"none"})}))}else t.cancel&&e("log","用户点击取消"," at pages/qing-f-c/regionalManager/customer-details.vue:573")}})},addCompetitor:function(t){var n=this.customerInfo.companyCode;o.navigateTo({url:"/pages/qing-f-c/sellDupty/add-competitor?companyCode="+n,success:function(t){e("log",t," at pages/qing-f-c/regionalManager/customer-details.vue:584")},fail:function(t){e("log",t," at pages/qing-f-c/regionalManager/customer-details.vue:587")},complete:function(){}})},detailCompetitor:function(t){var n=t;o.navigateTo({url:"/pages/qing-f-c/sellDupty/detail-competitor?rivalCode="+n,success:function(t){e("log",t," at pages/qing-f-c/regionalManager/customer-details.vue:598")},fail:function(t){e("log",t," at pages/qing-f-c/regionalManager/customer-details.vue:601")},complete:function(){}})},goEditCustomer:function(){var e=this.customerInfo.companyCode;o.navigateTo({url:"/pages/qing-f-c/sellDupty/edit-customer?companyCode="+e,success:function(e){},fail:function(){},complete:function(){}})},addContacts:function(t){var n=this.customerInfo.companyCode;e("log",t," at pages/qing-f-c/regionalManager/customer-details.vue:620"),o.navigateTo({url:"/pages/qing-f-c/sellDupty/add-contact?companyCode="+n,success:function(e){},fail:function(){},complete:function(){}})},toEditLinkman:function(e){var t=e;o.navigateTo({url:"/pages/qing-f-c/sellDupty/contact-detail?buyOrSellCode="+t,success:function(e){},fail:function(){},complete:function(){}})},toSetManagementCondition:function(e,t){var n=this.customerInfo.companyCode;if(2==e)wx.navigateTo({url:"/pages/qing-f-c/sellDupty/setManagerCondition?companyCode="+n});else if(1==e){var o=JSON.stringify(this.operation);wx.navigateTo({url:"/pages/qing-f-c/sellDupty/editManagerCondition?data="+o})}},toInquiry:function(){wx.navigateTo({url:"/pages/jin-suo-yun/customer-admin/sampling-record?id="+_id})},toProductPage:function(){if(2==this.customerInfo.buyOrSell){var e="/pages/qing-f-c/productShow/mainShow?companyCode=".concat(this.companyCode);wx.navigateTo({url:e})}},bindNull:function(){wx.showToast({title:"待开发...",icon:"none"})},tapDelete:function(){if(this.admin){var t=["删除客户"],n=this.customerInfo.id;wx.showActionSheet({itemList:t,success:function(t){wx.showModal({title:"删除客户",content:"删除客户后该客户的信息将作废，确定删除该客户？",success:function(t){t.confirm?p.deleteCompany(n).then((function(e){var t=getCurrentPages(),n=t[t.length-2];n.setData({setOver:!0}),wx.showToast({title:"删除客户成功"});setTimeout((function(){wx.navigateBack({})}),1e3)})).catch((function(t){e("log","删除失败err=>",t," at pages/qing-f-c/regionalManager/customer-details.vue:708"),wx.showToast({title:"删除客户失败",icon:"none"})})):t.cancel&&e("log","用户点击取消"," at pages/qing-f-c/regionalManager/customer-details.vue:715")}}),e("log","111Res---",t," at pages/qing-f-c/regionalManager/customer-details.vue:720")}})}},setData:function(e){var t,n,o=this,a=[];Object.keys(e).forEach((function(i){a=i.split("."),t=e[i],n=o.$data,a.forEach((function(e,i){i+1==a.length?o.$set(n,e,t):n[e]||o.$set(n,e,{}),n=n[e]}))}))}}),a);t.default=m}).call(this,n("0de9")["default"],n("6e42")["default"])},"6c1a":function(e,t,n){"use strict";n.r(t);var o=n("3c4a"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"88bd":function(e,t,n){"use strict";var o=n("0a2f"),a=n.n(o);a.a},"892e":function(e,t,n){"use strict";n.r(t);var o=n("906c"),a=n("6c1a");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("88bd");var c,s=n("f0c5"),r=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);t["default"]=r.exports},"8e65":function(e,t,n){"use strict";(function(e){n("3b9b"),n("921b");o(n("66fd"));var t=o(n("892e"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"906c":function(e,t,n){"use strict";var o,a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}))}},[["8e65","common/runtime","common/vendor"]]]);