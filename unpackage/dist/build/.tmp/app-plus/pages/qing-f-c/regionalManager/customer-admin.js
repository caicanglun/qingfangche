(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/regionalManager/customer-admin"],{"2aa9":function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,o,s,l=20,u=i("b65b"),c={data:function(){return{tabTwo:0,compileing:!1,allPitchOn:!1,inputValueOne:"",setOver:!1,selectContent:[],bindSelect:!1,loading:!1,numOne:0,numTwo:0,numThree:0,customerList:[],isFilterBuyer:!1,isFilterSeller:!1,pageNum:1,buyOrSell:-1,isAllocation:-1,isLastPage:!1,codeValue:[],isDoRefresh:!1,totalPage:""}},onReachBottom:function(){a.pageNum<a.totalPage&&(console.log(t("当前页",a.pageNum," at pages/qing-f-c/regionalManager/customer-admin.vue:219")),a.pageNum=a.pageNum+1,this.getCustomerList(a.pageNum,a.isAllocation))},onPullDownRefresh:function(){1==this.pageNum?this.getCustomerList(this.pageNum,this.isAllocation):(this.pageNum=this.pageNum-1,this.getCustomerList(this.pageNum,this.isAllocation)),n.stopPullDownRefresh()},onShow:function(){var t=getCurrentPages(),e=t[t.length-1];1==e.data.isDoRefresh&&(e.data.isDoRefresh=!1,this.pageNum=1,this.getCustomerList(this.pageNum,this.isAllocation),this.dmCount())},onLoad:function(t){a=this,o=n.getStorageSync("pupDefault"),s=t.regionCode,this.checkLogin()&&this.getCustomerList(this.pageNum,this.isAllocation)},onNavigationBarButtonTap:function(t){this.tabTwo>0&&this.tapCompile()},components:{},props:{},methods:{getCustomerList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r={keyword:c,regionCode:s,buyOrSell:n,isAllocation:i,pageNum:e,pageSize:l,postCode:o};console.log(t("客户请求参数",r," at pages/qing-f-c/regionalManager/customer-admin.vue:283")),u.dmList(r).then(function(e){console.log(t("客户信息===",e," at pages/qing-f-c/regionalManager/customer-admin.vue:286")),a.customerList=e.data.data.list,a.isLastPage=e.data.data.isLastPage,a.totalPage=e.data.data.totalPage}).catch(function(e){console.log(t("getBSList=err==",e.Msg," at pages/qing-f-c/regionalManager/customer-admin.vue:293"))});var g={keyword:c,regionCode:s,buyOrSell:n,postCode:o};u.dmCount(g).then(function(e){console.log(t("客户数量===",e," at pages/qing-f-c/regionalManager/customer-admin.vue:302")),a.numOne=e.data.data.all,a.numTwo=e.data.data.isAllocation,a.numThree=e.data.data.notAllocation}).catch(function(e){console.log(t("getBSList=err==",res," at pages/qing-f-c/regionalManager/customer-admin.vue:307"))})},checkboxChange:function(t){this.codeValue=t.detail.value},tabAllPitchOn:function(){this.allPitchOn=!this.allPitchOn,console.log(t("quanxuankuang",this.allPitchOn," at pages/qing-f-c/regionalManager/customer-admin.vue:320"));var e=[];this.allPitchOn?(this.customerList.forEach(function(t){e.push(t.companyCode)}),a.codeValue=e):a.codeValue=[]},blurInput:function(e){console.log(t(this.inputValueOne,e.detail.value," at pages/qing-f-c/regionalManager/customer-admin.vue:334"))},tapBuyFilter:function(t){var e;this.buyOrSell=1,this.isFilterBuyer=!0,this.isFilterSeller=!1,e=0==this.selectContent[0].id?"":this.selectContent[0].id,this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell,e)},tapSellFilter:function(){var t;this.buyOrSell=2,this.isFilterBuyer=!1,this.isFilterSeller=!0,t=0==this.selectContent[0].id?"":this.selectContent[0].id,this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell,t)},bindSearch:function(t){},bindSelectFunc:function(){this.bindSelect=!this.bindSelect},bindSelectContent:function(t){var e=t.currentTarget.dataset.index,i=this.selectContent,n=i[0];i[0]=i[e],i[e]=n,0==this.selectContent[0].id?this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell):this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell,this.selectContent[0].id)},tapSearch:function(){n.showLoading({title:"搜索中..."}),this.pageNum=1,this.isAllocation=-1,this.buyOrSell=-1,this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell,this.inputValueOne),setTimeout(function(){n.hideLoading()},1e3)},setNavButton:function(t){var e=getCurrentPages(),i=e[e.length-1],n=i.$getAppWebview(),a=n.getStyle().titleNView;a.buttons[0].text=t,n.setStyle({titleNView:a})},tapTabTwo:function(e){var i=e.currentTarget.dataset.index;this.tabTwo=i,console.log(t(i," at pages/qing-f-c/regionalManager/customer-admin.vue:439")),0==i&&(this.setNavButton(""),this.isAllocation=-1,this.compileing=!1,this.getCustomerList(this.pageNum,this.isAllocation)),1==i&&(this.setNavButton("编辑"),this.isAllocation=1,this.pageNum=1,this.getCustomerList(this.pageNum,this.isAllocation)),2==i&&(this.setNavButton("编辑"),this.isAllocation=0,this.pageNum=1,console.log(t("分配状态：",this.isAllocation," at pages/qing-f-c/regionalManager/customer-admin.vue:460")),this.getCustomerList(this.pageNum,this.isAllocation))},tapCompile:function(){this.compileing=!this.compileing,this.compileing?this.setNavButton("完成"):this.setNavButton("编辑")},setTime:function(){var t=new Date,e=t.getMonth()+1;e=e<10?"0"+e:e;var i=t.getFullYear()+"-"+e+"-"+t.getDate();this.newTime=i},toSingleAllo:function(t){a.codeValue=[],a.codeValue.push(t),this.toAllotAreaManager()},delSingleAllo:function(t){a.codeValue=[],a.codeValue.push(t),this.deleteAllot()},toAllotAreaManager:function(){var e=this,i=a.codeValue,o=[];if(a.codeValue.forEach(function(t){e.customerList.forEach(function(e){e.companyCode==t&&o.push(e.buyOrSell)})}),o.includes(1)&&o.includes(2))n.showToast({title:"不能同时选择买家和卖家",icon:"none"});else{console.log(t("optionList===",i.length," at pages/qing-f-c/regionalManager/customer-admin.vue:525")),i.length>0?(i=JSON.stringify(i),n.navigateTo({url:"/pages/qing-f-c/regionalManager/deputy-list?optionList="+i+"&buyOrSell="+o[0]})):n.showToast({title:"至少选择一个客户",icon:"none"})}},deleteAllot:function(){var e=this;n.showModal({title:"移除分配",content:"确认要移除该分配吗？不要请返回",showCancel:!0,cancelText:"返回",confirmText:"我要移除",success:function(i){if(i.confirm){var n=a.codeValue,o={companyCodes:n},s=e.Api.managerDel;e.myRequest(o,s,"post").then(function(i){console.log(t("区域经理删除分配",i," at pages/qing-f-c/regionalManager/customer-admin.vue:555")),0==i.data.status&&(wx.showToast({title:"成功删除分配"}),e.getCustomerList(e.pageNum,e.isAllocation))}).catch(function(e){console.log(t("getBSList=err==",i," at pages/qing-f-c/regionalManager/customer-admin.vue:565"))})}else if(i.cancel)return},fail:function(){},complete:function(){}})},toClientDetail:function(e){console.log(t(e," at pages/qing-f-c/regionalManager/customer-admin.vue:584")),wx.navigateTo({url:"/pages/qing-f-c/regionalManager/customer-details?companyCode="+e})}}};e.default=c}).call(this,i("0de9")["default"],i("6e42")["default"])},9955:function(t,e,i){"use strict";var n=i("c963"),a=i.n(n);a.a},"9bbe":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"9cc4":function(t,e,i){"use strict";i.r(e);var n=i("2aa9"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},a1e8:function(t,e,i){"use strict";(function(t){i("3b9b"),i("921b");n(i("66fd"));var e=n(i("c82b"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},c82b:function(t,e,i){"use strict";i.r(e);var n=i("9bbe"),a=i("9cc4");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("9955");var s=i("2877"),l=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=l.exports},c963:function(t,e,i){}},[["a1e8","common/runtime","common/vendor"]]]);