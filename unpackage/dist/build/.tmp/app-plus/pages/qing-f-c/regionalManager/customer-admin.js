(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/regionalManager/customer-admin"],{"3fa8":function(t,e,n){"use strict";(function(t,i){var a;function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l,s,u,r,c=function(){n.e("components/uni-icons/uni-icons").then(function(){return resolve(n("2cee"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/uni-load-more/uni-load-more").then(function(){return resolve(n("fbad"))}.bind(null,n)).catch(n.oe)},d=20,h=n("b65b"),f=(a={components:{uniIcon:c,uniLoadMore:g},data:function(){return{tabTwo:0,compileing:!1,allPitchOn:!1,inputValueOne:"",setOver:!1,selectContent:[],bindSelect:!1,loadingType:"more",loading:!1,numOne:0,numTwo:0,numThree:0,customerList:[],isFilterBuyer:!1,isFilterSeller:!1,pageNum:1,buyOrSell:-1,isAllocation:-1,isLastPage:!1,codeValue:[],isDoRefresh:!1,totalPage:""}},onReachBottom:function(){null!=r&&clearTimeout(r),r=setTimeout((function(){l.getMoreCustomer()}),1e3)},onPullDownRefresh:function(){l.getCustomerList()},onShow:function(){var t=getCurrentPages(),e=t[t.length-1];1==e.data.isDoRefresh&&(e.data.isDoRefresh=!1,this.pageNum=1,this.getCustomerList(this.pageNum,this.isAllocation),this.dmCount()),this.getCustomerList()},onLoad:function(e){l=this,s=t.getStorageSync("pupDefault"),u=this.$store.state.regionCode,this.checkLogin()&&this.getCustomerList(this.pageNum,this.isAllocation)},onNavigationBarButtonTap:function(t){this.tabTwo>0&&this.tapCompile()}},o(a,"components",{}),o(a,"props",{}),o(a,"methods",{getMoreCustomer:function(){if("more"!==l.loadingType)return!1;l.loadingType="loading",t.showNavigationBarLoading();var e={keyword:l.inputValueOne,regionCode:l.regionCode,buyOrSell:l.buyOrSell,isAllocation:l.isAllocation,pageNum:l.pageNum,pageSize:d,postCode:s};h.dmList(e).then((function(e){if(0==e.data.data.list.length)return i("log","no data"," at pages/qing-f-c/regionalManager/customer-admin.vue:293"),l.loadingType="",void t.hideNavigationBarLoading();l.pageNum++,i("log",e," at pages/qing-f-c/regionalManager/customer-admin.vue:299"),l.customerList=l.customerList.concat(e.data.data.list),l.loadingType="more",t.hideNavigationBarLoading()})).catch((function(t){i("log","getBSList=err==",t," at pages/qing-f-c/regionalManager/customer-admin.vue:306")}))},getCustomerList:function(){l.pageNum=1,l.loadingType="more",t.showNavigationBarLoading();var e={keyword:l.inputValueOne,regionCode:u,buyOrSell:l.buyOrSell,isAllocation:l.isAllocation,pageNum:l.pageNum,pageSize:d,postCode:s};i("log","客户请求参数",e," at pages/qing-f-c/regionalManager/customer-admin.vue:323"),h.dmList(e).then((function(t){i("log","客户信息===",t," at pages/qing-f-c/regionalManager/customer-admin.vue:326"),l.pageNum++,l.customerList=t.data.data.list,l.isLastPage=t.data.data.isLastPage,l.totalPage=t.data.data.totalPage})).catch((function(t){i("log","getBSList=err==",t.Msg," at pages/qing-f-c/regionalManager/customer-admin.vue:334")}));var n={keyword:l.inputValueOne,regionCode:u,buyOrSell:l.buyOrSell,postCode:s};h.dmCount(n).then((function(t){i("log","客户数量===",t," at pages/qing-f-c/regionalManager/customer-admin.vue:343"),l.numOne=t.data.data.all,l.numTwo=t.data.data.isAllocation,l.numThree=t.data.data.notAllocation})).catch((function(t){i("log","getBSList=err==",res," at pages/qing-f-c/regionalManager/customer-admin.vue:348")})),l.loadingType="more",t.hideNavigationBarLoading()},checkboxChange:function(t){this.codeValue=t.detail.value},tabAllPitchOn:function(){this.allPitchOn=!this.allPitchOn,i("log","quanxuankuang",this.allPitchOn," at pages/qing-f-c/regionalManager/customer-admin.vue:363");var t=[];this.allPitchOn?(this.customerList.forEach((function(e){t.push(e.companyCode)})),l.codeValue=t):l.codeValue=[]},blurInput:function(t){i("log",this.inputValueOne,t.detail.value," at pages/qing-f-c/regionalManager/customer-admin.vue:377")},tapBuyFilter:function(t){var e;this.buyOrSell=1,this.isFilterBuyer=!0,this.isFilterSeller=!1,e=0==this.selectContent[0].id?"":this.selectContent[0].id,this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell,e)},tapSellFilter:function(){var t;this.buyOrSell=2,this.isFilterBuyer=!1,this.isFilterSeller=!0,t=0==this.selectContent[0].id?"":this.selectContent[0].id,this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell,t)},bindSearch:function(t){},bindSelectFunc:function(){this.bindSelect=!this.bindSelect},tapSearch:function(){t.showLoading({title:"搜索中..."}),this.pageNum=1,this.isAllocation=-1,this.buyOrSell=-1,this.getCustomerList(),setTimeout((function(){t.hideLoading()}),1e3)},setNavButton:function(t){var e=getCurrentPages(),n=e[e.length-1],i=n.$getAppWebview(),a=i.getStyle().titleNView;a.buttons[0].text=t,i.setStyle({titleNView:a})},tapTabTwo:function(t){var e=t.currentTarget.dataset.index;this.tabTwo=e,i("log",e," at pages/qing-f-c/regionalManager/customer-admin.vue:464"),0==e&&(this.setNavButton(""),this.isAllocation=-1,this.compileing=!1),1==e&&(this.setNavButton("编辑"),this.isAllocation=1,this.pageNum=1),2==e&&(this.setNavButton("编辑"),this.isAllocation=0,this.pageNum=1,i("log","分配状态：",this.isAllocation," at pages/qing-f-c/regionalManager/customer-admin.vue:485")),this.getCustomerList()},tapCompile:function(){this.compileing=!this.compileing,this.compileing?this.setNavButton("完成"):this.setNavButton("编辑")},setTime:function(){var t=new Date,e=t.getMonth()+1;e=e<10?"0"+e:e;var n=t.getFullYear()+"-"+e+"-"+t.getDate();this.newTime=n},toSingleAllo:function(t){l.codeValue=[],l.codeValue.push(t),this.toAllotAreaManager()},delSingleAllo:function(t){l.codeValue=[],l.codeValue.push(t),this.deleteAllot()},toAllotAreaManager:function(){var e=this,n=l.codeValue,a=[];if(l.codeValue.forEach((function(t){e.customerList.forEach((function(e){e.companyCode==t&&a.push(e.buyOrSell)}))})),a.includes(1)&&a.includes(2))t.showToast({title:"不能同时选择买家和卖家",icon:"none"});else{i("log","optionList===",n.length," at pages/qing-f-c/regionalManager/customer-admin.vue:550"),n.length>0?(n=JSON.stringify(n),t.navigateTo({url:"/pages/qing-f-c/regionalManager/deputy-list?optionList="+n+"&buyOrSell="+a[0]})):t.showToast({title:"至少选择一个客户",icon:"none"})}},deleteAllot:function(){var e=this;t.showModal({title:"移除分配",content:"确认要移除该分配吗？不要请返回",showCancel:!0,cancelText:"返回",confirmText:"我要移除",success:function(t){if(t.confirm){var n=l.codeValue,a={companyCodes:n},o=e.Api.managerDel;e.myRequest(a,o,"post").then((function(t){i("log","区域经理删除分配",t," at pages/qing-f-c/regionalManager/customer-admin.vue:580"),0==t.data.status&&(wx.showToast({title:"成功删除分配"}),e.getCustomerList(e.pageNum,e.isAllocation))})).catch((function(e){i("log","getBSList=err==",t," at pages/qing-f-c/regionalManager/customer-admin.vue:590")}))}else if(t.cancel)return},fail:function(){},complete:function(){}})},toClientDetail:function(t){i("log",t," at pages/qing-f-c/regionalManager/customer-admin.vue:609"),wx.navigateTo({url:"/pages/qing-f-c/regionalManager/customer-details?companyCode="+t})}}),a);e.default=f}).call(this,n("6e42")["default"],n("0de9")["default"])},5977:function(t,e,n){},9955:function(t,e,n){"use strict";var i=n("5977"),a=n.n(i);a.a},"9cc4":function(t,e,n){"use strict";n.r(e);var i=n("3fa8"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},a1e8:function(t,e,n){"use strict";(function(t){n("3b9b"),n("921b");i(n("66fd"));var e=i(n("c82b"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},c82b:function(t,e,n){"use strict";n.r(e);var i=n("e4f5"),a=n("9cc4");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("9955");var l,s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],l);e["default"]=u.exports},e4f5:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))}},[["a1e8","common/runtime","common/vendor"]]]);