(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/regionalManager/customer-admin"],{"3fa8":function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=r(n("4795"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n,o,i,a,r){try{var u=e[a](r),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(o,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function r(e){s(a,o,i,r,u,"next",e)}function u(e){s(a,o,i,r,u,"throw",e)}r(void 0)}))}}var c,g,d=function(){n.e("components/dropMenuRegion").then(function(){return resolve(n("a9a8"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/dropMenuDeputy").then(function(){return resolve(n("6252"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/dropMenuLevel").then(function(){return resolve(n("951a"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/uni-icons/uni-icons").then(function(){return resolve(n("2cee"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/uni-load-more/uni-load-more").then(function(){return resolve(n("fbad"))}.bind(null,n)).catch(n.oe)},v=20,C=n("b65b"),y=(i={components:{uniIcon:h,uniLoadMore:m,dropMenuRegion:d,dropMenuDeputy:f,dropMenuLevel:p},data:function(){return{showAllocation:!1,regionList:[],tabTwo:0,compileing:!1,allPitchOn:!1,inputValueOne:"",setOver:!1,selectContent:[],bindSelect:!1,loadingType:"more",loading:!1,numOne:0,numTwo:0,numThree:0,customerList:[],isFilterBuyer:!1,isFilterSeller:!1,pageNum:1,buyOrSell:-1,isAllocation:-1,isLastPage:!1,codeValue:[],isDoRefresh:!1,totalPage:"",userCode:"",privateLevel:"",companyLevel:"",regionCode:"",postCode:"",totalCount:""}},onReachBottom:function(){null!=g&&clearTimeout(g),g=setTimeout((function(){c.getMoreCustomer()}),1e3)},onPullDownRefresh:function(){c.getCustomerList()},onShow:function(){this.getCustomerList()},onLoad:function(t){c=this,this.postCode=e.getStorageSync("pupDefault"),this.regionCode=this.$store.state.regionCode,this.getRegionCode(),this.checkLogin()&&this.getCustomerList()},onNavigationBarButtonTap:function(e){this.tapCompile()}},u(i,"components",{}),u(i,"props",{}),u(i,"methods",{getRegionCode:function(){var e=this;return l(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/cm/region_deputy");case 2:n=t.sent,e.regionList=n.data.data.list,e.tapRegion(e.regionCode),o("log",n," at pages/qing-f-c/regionalManager/customer-admin.vue:259");case 6:case"end":return t.stop()}}),t)})))()},tapRegion:function(e){var t=this;o("log",e," at pages/qing-f-c/regionalManager/customer-admin.vue:262"),this.regionList.forEach((function(n,o){n.regionCode==e&&(t.$refs.refDeputy.selectContent=t.regionList[o].list,t.regionList[o].list.length>6?t.$refs.refDeputy.index=2:t.$refs.refDeputy.index=1)}))},tapSelectLevel:function(e){o("log",e," at pages/qing-f-c/regionalManager/customer-admin.vue:278"),this.companyLevel=e,this.pageNum=1,this.loadingType="more",this.getCustomerList()},tapSelectDeputy:function(e){o("log",e," at pages/qing-f-c/regionalManager/customer-admin.vue:285"),this.userCode=e,this.pageNum=1,this.loadingType="more",this.getCustomerList()},getMoreCustomer:function(){var t=this;return l(a.default.mark((function n(){var i,r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("more"===c.loadingType){n.next=2;break}return n.abrupt("return",!1);case 2:return c.loadingType="loading",e.showNavigationBarLoading(),i={keyword:c.inputValueOne,regionCode:c.regionCode,isAllocation:c.isAllocation,pageNum:c.pageNum,pageSize:v,postCode:t.postCode,userCode:t.userCode,companyLevel:t.companyLevel,privateLevel:t.privateLevel},n.next=7,t.$http.get("/cm/list",{data:i});case 7:if(r=n.sent,0!=r.data.data.list.length){n.next=13;break}return o("log","no data"," at pages/qing-f-c/regionalManager/customer-admin.vue:315"),c.loadingType="",e.hideNavigationBarLoading(),n.abrupt("return");case 13:c.pageNum++,o("log",r," at pages/qing-f-c/regionalManager/customer-admin.vue:321"),c.customerList=c.customerList.concat(r.data.data.list),c.loadingType="more",e.hideNavigationBarLoading();case 18:case"end":return n.stop()}}),n)})))()},getCustomerList:function(){var t=this;return l(a.default.mark((function n(){var i,r,u;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c.pageNum=1,c.loadingType="more",e.showNavigationBarLoading(),i={keyword:c.inputValueOne,regionCode:c.regionCode,isAllocation:c.isAllocation,pageNum:c.pageNum,pageSize:v,postCode:t.postCode,userCode:t.userCode,companyLevel:t.companyLevel,privateLevel:t.privateLevel},o("log","客户请求参数",i," at pages/qing-f-c/regionalManager/customer-admin.vue:345"),n.next=7,t.$http.get("/cm/list",{data:i});case 7:r=n.sent,o("log","客户信息===",r," at pages/qing-f-c/regionalManager/customer-admin.vue:348"),c.pageNum++,c.customerList=r.data.data.list,t.totalCount=r.data.data.totalCount,c.isLastPage=r.data.data.isLastPage,c.totalPage=r.data.data.totalPage,u={keyword:c.inputValueOne,regionCode:t.regionCode,buyOrSell:c.buyOrSell,postCode:t.postCode},C.dmCount(u).then((function(e){o("log","客户数量===",e," at pages/qing-f-c/regionalManager/customer-admin.vue:363"),c.numOne=e.data.data.all,c.numTwo=e.data.data.isAllocation,c.numThree=e.data.data.notAllocation})).catch((function(e){o("log","getBSList=err==",r," at pages/qing-f-c/regionalManager/customer-admin.vue:368")})),c.loadingType="more",e.hideNavigationBarLoading();case 18:case"end":return n.stop()}}),n)})))()},checkboxChange:function(e){this.codeValue=e.detail.value},tabAllPitchOn:function(){this.allPitchOn=!this.allPitchOn,o("log","quanxuankuang",this.allPitchOn," at pages/qing-f-c/regionalManager/customer-admin.vue:383");var e=[];this.allPitchOn?(this.customerList.forEach((function(t){e.push(t.companyCode)})),c.codeValue=e):c.codeValue=[]},blurInput:function(e){o("log",this.inputValueOne,e.detail.value," at pages/qing-f-c/regionalManager/customer-admin.vue:397")},tapBuyFilter:function(e){var t;this.buyOrSell=1,this.isFilterBuyer=!0,this.isFilterSeller=!1,t=0==this.selectContent[0].id?"":this.selectContent[0].id,this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell,t)},tapSellFilter:function(){var e;this.buyOrSell=2,this.isFilterBuyer=!1,this.isFilterSeller=!0,e=0==this.selectContent[0].id?"":this.selectContent[0].id,this.getCustomerList(this.pageNum,this.isAllocation,this.buyOrSell,e)},bindSearch:function(e){},bindSelectFunc:function(){this.bindSelect=!this.bindSelect},tapSearch:function(){e.showLoading({title:"搜索中..."}),this.pageNum=1,this.isAllocation=-1,this.buyOrSell=-1,this.getCustomerList(),setTimeout((function(){e.hideLoading()}),1e3)},setNavButton:function(e){var t=getCurrentPages(),n=t[t.length-1],o=n.$getAppWebview(),i=o.getStyle().titleNView;i.buttons[0].text=e,o.setStyle({titleNView:i})},tapTabTwo:function(e){var t=e.currentTarget.dataset.index;this.tabTwo=t,o("log",t," at pages/qing-f-c/regionalManager/customer-admin.vue:484"),0==t&&(this.isAllocation=-1,this.compileing=!1),1==t&&(this.isAllocation=1,this.compileing=!0,this.pageNum=1),2==t&&(this.isAllocation=0,this.compileing=!0,this.pageNum=1,o("log","分配状态：",this.isAllocation," at pages/qing-f-c/regionalManager/customer-admin.vue:507")),this.getCustomerList()},tapCompile:function(){this.showAllocation=!this.showAllocation},setTime:function(){var e=new Date,t=e.getMonth()+1;t=t<10?"0"+t:t;var n=e.getFullYear()+"-"+t+"-"+e.getDate();this.newTime=n},toSingleAllo:function(e){c.codeValue=[],c.codeValue.push(e),this.toAllotAreaManager()},delSingleAllo:function(e){c.codeValue=[],c.codeValue.push(e),this.deleteAllot()},toAllotAreaManager:function(){var t=this,n=c.codeValue,i=[];if(c.codeValue.forEach((function(e){t.customerList.forEach((function(t){t.companyCode==e&&i.push(t.buyOrSell)}))})),i.includes(1)&&i.includes(2))e.showToast({title:"不能同时选择买家和卖家",icon:"none"});else{o("log","optionList===",n.length," at pages/qing-f-c/regionalManager/customer-admin.vue:578"),n.length>0?(n=JSON.stringify(n),e.navigateTo({url:"/pages/qing-f-c/regionalManager/deputy-list?optionList="+n+"&buyOrSell="+i[0]})):e.showToast({title:"至少选择一个客户",icon:"none"})}},deleteAllot:function(){var t=this;e.showModal({title:"移除分配",content:"确认要移除该分配吗？不要请返回",showCancel:!0,cancelText:"返回",confirmText:"我要移除",success:function(e){if(e.confirm){var n=c.codeValue,i={companyCodes:n},a=t.Api.managerDel;t.myRequest(i,a,"post").then((function(e){o("log","区域经理删除分配",e," at pages/qing-f-c/regionalManager/customer-admin.vue:608"),0==e.data.status&&(wx.showToast({title:"成功删除分配"}),t.getCustomerList(t.pageNum,t.isAllocation))})).catch((function(t){o("log","getBSList=err==",e," at pages/qing-f-c/regionalManager/customer-admin.vue:618")}))}else if(e.cancel)return},fail:function(){},complete:function(){}})},toClientDetail:function(e){o("log",e," at pages/qing-f-c/regionalManager/customer-admin.vue:637"),wx.navigateTo({url:"/pages/qing-f-c/regionalManager/customer-details?companyCode="+e})}}),i);t.default=y}).call(this,n("6e42")["default"],n("0de9")["default"])},5977:function(e,t,n){},9955:function(e,t,n){"use strict";var o=n("5977"),i=n.n(o);i.a},"9cc4":function(e,t,n){"use strict";n.r(t);var o=n("3fa8"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},a1e8:function(e,t,n){"use strict";(function(e){n("3b9b"),n("921b");o(n("66fd"));var t=o(n("c82b"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},c82b:function(e,t,n){"use strict";n.r(t);var o=n("e519"),i=n("9cc4");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("9955");var r,u=n("f0c5"),s=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=s.exports},e519:function(e,t,n){"use strict";var o,i=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}))}},[["a1e8","common/runtime","common/vendor"]]]);