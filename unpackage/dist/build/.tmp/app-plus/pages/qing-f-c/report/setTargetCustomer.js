(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qing-f-c/report/setTargetCustomer"],{"22a7":function(e,t,n){"use strict";(function(e){n("3b9b"),n("921b");a(n("66fd"));var t=a(n("cfca"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"54e6":function(e,t,n){"use strict";var a=n("c095"),r=n.n(a);r.a},bf9d:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,c=i(n("4795"));function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a,r,o,c){try{var i=e[o](c),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){u(o,a,r,c,i,"next",e)}function i(e){u(o,a,r,c,i,"throw",e)}c(void 0)}))}}function l(e){var t=new Date,n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();return"start"===e?n-=60:"end"===e&&(n+=2),a=a>9?a:"0"+a,r=r>9?r:"0"+r,"".concat(n,"-").concat(a)}function f(e){var t=new Date,n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();return"start"===e?n-=60:"end"===e&&(n+=2),a=a>9?a:"0"+a,r=r>9?r:"0"+r,"".concat(n,"-").concat(a,"-").concat(r)}function d(){var e=new Date,t=new Date(e.getYear(),e.getMonth(),1),n=Number(t.getMonth())+1;return e.getFullYear()+"-"+n+"-"+t.getDate()}var p={data:function(){return{items:[],selectArr:[],time:"",customLevel:1,keyword:"",postCode:"",pageNum:1,pageSize:40,buyOrSell:"",regionCode:""}},onReachBottom:function(){null!=o&&clearTimeout(o),o=setTimeout((function(){r.fetchMoreList()}),1e3)},onNavigationBarButtonTap:function(e){this.tapSettingButton()},onLoad:function(t){r=this,this.time=l({format:!0}),this.buyOrSell=t.buyOrSell,this.regionCode=t.regionCode,this.postCode=e.getStorageSync("pupDefault"),this.fetchList()},methods:{removeItem:function(e){var t=this,n="";this.selectArr.forEach((function(t,a){t.companyCode==e&&(n=a)})),this.selectArr.splice(n,1),this.items.forEach((function(n,a){n.companyCode==e&&t.$set(n,"checked",!1)}))},toCustomerDetail:function(t){e.navigateTo({url:"/pages/qing-f-c/regionalManager/customer-details?companyCode="+t})},getSelectCustomer:function(){var e=this;return s(c.default.mark((function t(){var n,r;return c.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={postCode:e.postCode,buyOrSell:e.buyOrSell,regionCode:e.regionCode,startTime:d({format:!0}),endTime:f({format:!0}),pageNum:e.pageNum,pageSize:e.pageSize},t.next=3,e.$http.get("/data/new_customer_list",{data:n});case 3:r=t.sent,r.data.data.list.forEach((function(t){e.items.forEach((function(n,a){n.companyCode==t.companyCode&&e.items.splice(a,1)})),e.$set(t,"checked",!0),e.items.unshift(t)})),e.selectItem(),a("log",r," at pages/qing-f-c/report/setTargetCustomer.vue:167");case 7:case"end":return t.stop()}}),t)})))()},fetchList:function(){var e=this;return s(c.default.mark((function t(){var n,r;return c.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={keyword:e.keyword,postCode:e.postCode,level:e.customLevel,pageNum:e.pageNum,pageSize:e.pageSize},t.next=3,e.$http.get("/cm/level_list",{data:n});case 3:r=t.sent,e.items=r.data.data.list,e.getSelectCustomer(),a("log",r," at pages/qing-f-c/report/setTargetCustomer.vue:187");case 7:case"end":return t.stop()}}),t)})))()},fetchMoreList:function(){var e=this;return s(c.default.mark((function t(){var n,r;return c.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.pageNum+=1,n={keyword:e.keyword,postCode:e.postCode,level:e.customLevel,pageNum:e.pageNum,pageSize:e.pageSize},t.next=4,e.$http.get("/cm/level_list",{data:n});case 4:r=t.sent,e.items=e.items.concat(r.data.data.list),a("log",r," at pages/qing-f-c/report/setTargetCustomer.vue:205");case 7:case"end":return t.stop()}}),t)})))()},inputConfirm:function(){var t=this;return s(c.default.mark((function n(){var r,o;return c.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(""!=t.keyword){n.next=3;break}return e.showToast({title:"请输入搜索内容",icon:"none"}),n.abrupt("return");case 3:return r={keyword:t.keyword,postCode:t.postCode,level:t.customLevel,pageNum:1,pageSize:t.pageSize},n.next=6,t.$http.get("/cm/level_list",{data:r});case 6:o=n.sent,o.data.data.list.forEach((function(e){t.items.forEach((function(n,a){n.companyCode==e.companyCode&&t.items.splice(a,1)})),t.items.unshift(e)})),a("log",o," at pages/qing-f-c/report/setTargetCustomer.vue:234");case 9:case"end":return n.stop()}}),n)})))()},checkboxChange:function(e){for(var t=this.items,n=e.detail.value,a=0,r=t.length;a<r;++a){var o=t[a];n.includes(o.companyCode)?this.$set(o,"checked",!0):this.$set(o,"checked",!1)}this.selectItem()},tapSettingButton:function(){var t=this;return s(c.default.mark((function n(){var r,o,i;return c.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[],a("log",t.items," at pages/qing-f-c/report/setTargetCustomer.vue:252"),t.selectArr.forEach((function(e){r.push({userPostCode:e.userPostCode,companyCode:e.companyCode})})),o={time:t.time,list:r},e.showLoading({title:"提交中",mask:!0}),a("log",o," at pages/qing-f-c/report/setTargetCustomer.vue:267"),n.next=8,t.$http.post("/cm/new_customer_target",{data:o});case 8:i=n.sent,e.hideLoading(),e.showToast({title:"设置成功",duration:1e3}),setTimeout((function(){e.navigateBack({delta:-1})}),2e3),a("log",i," at pages/qing-f-c/report/setTargetCustomer.vue:279");case 13:case"end":return n.stop()}}),n)})))()},selectItem:function(){var e=this;this.selectArr=[],this.items.forEach((function(t){t.checked&&e.selectArr.push(t)}))}}};t.default=p}).call(this,n("6e42")["default"],n("0de9")["default"])},c095:function(e,t,n){},cfca:function(e,t,n){"use strict";n.r(t);var a=n("ef45"),r=n("e2bc");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("54e6");var c,i=n("f0c5"),u=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],c);t["default"]=u.exports},e2bc:function(e,t,n){"use strict";n.r(t);var a=n("bf9d"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a},ef45:function(e,t,n){"use strict";var a,r=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}))}},[["22a7","common/runtime","common/vendor"]]]);