(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/jin-suo-yun/index"],{8611:function(n,e,i){"use strict";var t=function(){var n=this,e=n.$createElement;n._self._c},a=[];i.d(e,"a",function(){return t}),i.d(e,"b",function(){return a})},"89d9":function(n,e,i){"use strict";i.r(e);var t=i("8611"),a=i("9777");for(var s in a)"default"!==s&&function(n){i.d(e,n,function(){return a[n]})}(s);i("ba92");var o=i("2877"),u=Object(o["a"])(a["default"],t["a"],t["b"],!1,null,null,null);e["default"]=u.exports},9777:function(n,e,i){"use strict";i.r(e);var t=i("f103"),a=i.n(t);for(var s in t)"default"!==s&&function(n){i.d(e,n,function(){return t[n]})}(s);e["default"]=a.a},b338:function(n,e,i){},ba92:function(n,e,i){"use strict";var t=i("b338"),a=i.n(t);a.a},f103:function(n,e,i){"use strict";(function(n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,s=i("104e"),o=i("72b4"),u=(i("1147"),i("4c17"),[{icon:"/images/jinsy/kehu.png",name:"客户管理",url:"/pages/jin-suo-yun/customer-admin/customer-list"},{icon:"/images/jinsy/jiaoyi.png",name:"交易管理",url:"/pages/user-order/order"},{icon:"/images/jinsy/xunjia.png",name:"询价管理",url:"/pages/jin-suo-yun/deputy/inquiry-management-list"},{icon:"/images/jinsy/yangpin.png",name:"产品搜索",url:"/pages/jin-suo-yun/deputy/sample-many-search"},{icon:"/images/jinsy/tongji.png",name:"报价统计",url:""},{icon:"/images/jinsy/wuliu.png",name:"物流信息",url:""}]),r=[{icon:"/images/jinsy/woxunjia.png",name:"我的询价",url:"/pages/jin-suo-yun/deputy/inquiry-management-list"},{icon:"/images/jinsy/wojiaoyi.png",name:"我的交易",url:"/pages/user-order/order"},{icon:"/images/jinsy/lianxi.png",name:"联系帮办",url:""}],g=[{icon:"/images/jinsy/woxunjia.png",name:"我的报价",url:"/pages/jin-suo-yun/deputy/my-offer-list"},{icon:"/images/jinsy/wojiaoyi.png",name:"我的交易",url:"/pages/user-order/order"},{icon:"/images/jinsy/lianxi.png",name:"联系帮办",url:""},{icon:"/images/jinsy/zhanshi.png",name:"我的展示页",url:""},{icon:"/images/jinsy/tongji.png",name:"报表统计",url:""}],c=[{icon:"/images/jinsy/yangpin.png",name:"产品搜索",url:"/pages/jin-suo-yun/deputy/sample-many-search"},{icon:"/images/jinsy/tongji.png",name:"报表统计",url:""},{icon:"/images/jinsy/fenxi.png",name:"分析单管理",url:"/pages/jin-suo-yun/analysis-list"}],l=[{icon:"/images/jinsy/kehu.png",name:"客户管理",url:"/pages/jin-suo-yun/admin/customer-admin"},{icon:"/images/jinsy/jiaoyi.png",name:"交易管理",url:"/pages/user-order/order"},{icon:"/images/jinsy/xunjia.png",name:"询价管理",url:"/pages/jin-suo-yun/deputy/inquiry-management-list"},{icon:"/images/jinsy/yangpin.png",name:"产品搜索",url:"/pages/jin-suo-yun/deputy/sample-many-search"},{icon:"/images/jinsy/tongji.png",name:"报价统计",url:""},{icon:"/images/jinsy/wuliu.png",name:"物流信息",url:""},{icon:"/images/jinsy/admin.png",name:"帮办管理",url:"/pages/jin-suo-yun/admin/deputy-admin"}],d={data:function(){return{arrList:[],userInfo:"",isIdentity:!1,inAudit:!1,identityName:"",regionalManager:!1,newsNum:0,popAds:!1}},onPullDownRefresh:function(){this.getUserInfo(),this.getNewsNum(),this.popAds()},onShow:function(n){var e=wx.getStorageSync("register");e&&(this.getUserInfo(),wx.removeStorageSync("register")),wx.getStorageSync("token")&&this.getNewsNum()},onLoad:function(e){wx.showLoading({title:"加载中"});setTimeout(function(){wx.hideLoading()},3e3);a=this,wx.getStorageSync("token")?(this.setUserInfo(),this.getUserInfo(),this.popAds()):(wx.hideLoading(),o.loginByWeixin().then(function(n){a.setUserInfo(),a.getUserInfo(),a.popAds()}).catch(function(e){console.log(n("err=>",e," at pages\\jin-suo-yun\\index.vue:219"))}))},components:{},props:{},methods:{getNewsNum:function(){s.getNewsNum().then(function(n){a.setData({newsNum:n.data})}).catch(function(e){console.log(n("getNewsNum=err==",res," at pages\\jin-suo-yun\\index.vue:233"))})},getUserInfo:function(){wx.showLoading({title:"加载中"}),wx.stopPullDownRefresh(),s.getUserInfo().then(function(e){console.log(n("res----",e.data," at pages\\jin-suo-yun\\index.vue:243")),wx.setStorageSync("userInfo",e.data),a.setUserInfo()}).catch(function(e){wx.hideLoading(),console.log(n("getUserInfoERR=>",e," at pages\\jin-suo-yun\\index.vue:250"))})},setUserInfo:function(){var n=wx.getStorageSync("userInfo");if(this.setData({userInfo:n}),n.authority&&0==n.authority.length)this.setData({isIdentity:!1});else if("EXAMINE"==n.authority[0].name)this.setData({isIdentity:!1,inAudit:!0});else{this.setData({isIdentity:!0});var e=n.authority[0].name;"ROLE_SELL_DEPUTY"==e?7==n.authorityOther?this.setData({identityName:"卖帮办",regionalManager:!0,arrList:l}):this.setData({identityName:"卖帮办",regionalManager:!1,arrList:u}):"ROLE_BUY_DEPUTY"==e?7==n.authorityOther?this.setData({identityName:"买帮办",regionalManager:!0,arrList:l}):this.setData({identityName:"买帮办",regionalManager:!1,arrList:u}):"ROLE_BUYER"==e?this.setData({identityName:"买家",regionalManager:!1,arrList:r}):"ROLE_SELLER"==e?this.setData({identityName:"卖家",regionalManager:!1,arrList:g}):"ROLE_ANALYST"==e?this.setData({identityName:"分析师",regionalManager:!1,arrList:c}):"ROLE_SALES_DIRECTOR"==e?this.setData({identityName:"销售总监",regionalManager:!1,arrList:l}):"FREEZE"==e&&this.setData({regionalManager:!1,identityName:"已冻结",arrList:[]})}if(n.authority&&2==n.authority.length&&"ROLE_MANAGER"==n.authority[1].name){var i=this.arrList;i.push({icon:"/images/jinsy/examine.png",name:"审核管理",url:"/pages/jin-suo-yun/customer-admin/bond-examine"}),this.setData({arrList:i})}wx.hideLoading()},scanCode:function(){wx.scanCode({success:function(e){console.log(n("code---",e," at pages\\jin-suo-yun\\index.vue:354")),console.log(n("path---",e.path," at pages\\jin-suo-yun\\index.vue:355")),wx.navigateTo({url:"/"+e.path})},fail:function(n){}})},navNewsPage:function(){console.log(n("跳转到消息页"," at pages\\jin-suo-yun\\index.vue:364")),wx.navigateTo({url:"/pages/jin-suo-yun/news"})},toChoicePage:function(){wx.getStorageSync("token")?t.getSetting({success:function(e){e.authSetting["scope.userInfo"]&&(a.inAudit?wx.showModal({title:"",content:"您的内部人员身份正在审核中"}):wx.showModal({title:"请先登录后再进行后续操作",content:"本次更新增加了身份信息，请登录并选择您的身份（身份只能选择一次，请谨慎选择）",success:function(e){e.confirm?wx.navigateTo({url:"/pages/jin-suo-yun/choice-identity"}):e.cancel&&console.log(n("用户点击取消"," at pages\\jin-suo-yun\\index.vue:403"))}}))}}):wx.showModal({title:"",content:"您的内部人员身份审核未通过，请选择其他身份进行注册。",success:function(e){e.confirm?wx.navigateTo({url:"/pages/jin-suo-yun/choice-identity"}):e.cancel&&console.log(n("取消页面！"," at pages\\jin-suo-yun\\index.vue:381"))}})},userInfo:function(e){console.log(n(e," at pages\\jin-suo-yun\\index.vue:420")),-1!=e.detail.errMsg.indexOf("getUserInfo:fail")?console.log(n("用户拒绝授权"," at pages\\jin-suo-yun\\index.vue:423")):(console.log(n("用户接受授权"," at pages\\jin-suo-yun\\index.vue:425")),wx.getStorageSync("userInfo")||a.onLoad(),wx.setStorageSync("loginOn",!1))},toJump:function(n){var e=n.currentTarget.dataset.url;e&&(this.popAds||"/pages/user-order/order"!=e)||wx.showToast({title:"开发中...",icon:"none"})},popAds:function(e){s.controllShow().then(function(e){console.log(n("res---",e," at pages\\jin-suo-yun\\index.vue:450")),1==e.data?a.setData({popAds:!0}):a.setData({popAds:!1})}).catch(function(e){console.log(n("Err=>",e," at pages\\jin-suo-yun\\index.vue:462"))})},setData:function(n){var e,i,t=this,a=[];Object.keys(n).forEach(function(s){a=s.split("."),e=n[s],i=t.$data,a.forEach(function(n,s){s+1==a.length?t.$set(i,n,e):i[n]||t.$set(i,n,{}),i=i[n]})})}}};e.default=d}).call(this,i("0de9")["default"],i("6e42")["default"])}},[["f4c8","common/runtime","common/vendor"]]]);